import{S as re,i as oe,s as ie,D as te,m as z,o as B,p as F,u as J,w as W,x as q,E as ue,F as Ce,G as Me,H as ke,I as Ie,n as fe,d as p,a as ee,b as U,c as i,q as f,e as E,f as M,A as Z,h as N,g as G,j as D,k as A,t as K,z as ye,R as pe,T as ve,B as tt,J as Ge,C as Le,r as Pe,M as ce,a1 as Mt,Z as lt,O as Ue,P as st,K as Ee,Q as at,_ as Je,a2 as qe,a3 as We,v as Rt,y as Vt}from"../chunks/BXmqPpqk.js";import"../chunks/IHki7fMi.js";import{e as ne,H as Nt}from"../chunks/f7oLYUCy.js";import{B as Ze}from"../chunks/1oruFWOS.js";import{U as At,C as kt,P as Tt}from"../chunks/DymjsdB2.js";import{I as Re,g as Ve,a as Ne}from"../chunks/1lzdWyTH.js";import{c as Ae,a as Te}from"../chunks/LhW53hAP.js";function Lt(n){let e;const s=n[2].default,t=Ce(s,n,n[3],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,a){t&&t.m(l,a),e=!0},p(l,a){t&&t.p&&(!e||a&8)&&Me(t,s,l,l[3],e?Ie(s,l[3],a,null):ke(l[3]),null)},i(l){e||(F(t,l),e=!0)},o(l){B(t,l),e=!1},d(l){t&&t.d(l)}}}function Pt(n){let e,s;const t=[{name:"download"},n[1],{iconNode:n[0]}];let l={$$slots:{default:[Lt]},$$scope:{ctx:n}};for(let a=0;a<t.length;a+=1)l=te(l,t[a]);return e=new Re({props:l}),{c(){q(e.$$.fragment)},l(a){W(e.$$.fragment,a)},m(a,r){J(e,a,r),s=!0},p(a,[r]){const o=r&3?Ve(t,[t[0],r&2&&Ne(a[1]),r&1&&{iconNode:a[0]}]):{};r&8&&(o.$$scope={dirty:r,ctx:a}),e.$set(o)},i(a){s||(F(e.$$.fragment,a),s=!0)},o(a){B(e.$$.fragment,a),s=!1},d(a){z(e,a)}}}function Ft(n,e,s){let{$$slots:t={},$$scope:l}=e;const a=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]];return n.$$set=r=>{s(1,e=te(te({},e),ue(r))),"$$scope"in r&&s(3,l=r.$$scope)},e=ue(e),[a,e,t,l]}class Bt extends re{constructor(e){super(),oe(this,e,Ft,Pt,ie,{})}}function St(n){let e;const s=n[2].default,t=Ce(s,n,n[3],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,a){t&&t.m(l,a),e=!0},p(l,a){t&&t.p&&(!e||a&8)&&Me(t,s,l,l[3],e?Ie(s,l[3],a,null):ke(l[3]),null)},i(l){e||(F(t,l),e=!0)},o(l){B(t,l),e=!1},d(l){t&&t.d(l)}}}function jt(n){let e,s;const t=[{name:"file-text"},n[1],{iconNode:n[0]}];let l={$$slots:{default:[St]},$$scope:{ctx:n}};for(let a=0;a<t.length;a+=1)l=te(l,t[a]);return e=new Re({props:l}),{c(){q(e.$$.fragment)},l(a){W(e.$$.fragment,a)},m(a,r){J(e,a,r),s=!0},p(a,[r]){const o=r&3?Ve(t,[t[0],r&2&&Ne(a[1]),r&1&&{iconNode:a[0]}]):{};r&8&&(o.$$scope={dirty:r,ctx:a}),e.$set(o)},i(a){s||(F(e.$$.fragment,a),s=!0)},o(a){B(e.$$.fragment,a),s=!1},d(a){z(e,a)}}}function Ht(n,e,s){let{$$slots:t={},$$scope:l}=e;const a=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}],["path",{d:"M10 9H8"}],["path",{d:"M16 13H8"}],["path",{d:"M16 17H8"}]];return n.$$set=r=>{s(1,e=te(te({},e),ue(r))),"$$scope"in r&&s(3,l=r.$$scope)},e=ue(e),[a,e,t,l]}class Ot extends re{constructor(e){super(),oe(this,e,Ht,jt,ie,{})}}function Ut(n){let e;const s=n[2].default,t=Ce(s,n,n[3],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,a){t&&t.m(l,a),e=!0},p(l,a){t&&t.p&&(!e||a&8)&&Me(t,s,l,l[3],e?Ie(s,l[3],a,null):ke(l[3]),null)},i(l){e||(F(t,l),e=!0)},o(l){B(t,l),e=!1},d(l){t&&t.d(l)}}}function zt(n){let e,s;const t=[{name:"filter"},n[1],{iconNode:n[0]}];let l={$$slots:{default:[Ut]},$$scope:{ctx:n}};for(let a=0;a<t.length;a+=1)l=te(l,t[a]);return e=new Re({props:l}),{c(){q(e.$$.fragment)},l(a){W(e.$$.fragment,a)},m(a,r){J(e,a,r),s=!0},p(a,[r]){const o=r&3?Ve(t,[t[0],r&2&&Ne(a[1]),r&1&&{iconNode:a[0]}]):{};r&8&&(o.$$scope={dirty:r,ctx:a}),e.$set(o)},i(a){s||(F(e.$$.fragment,a),s=!0)},o(a){B(e.$$.fragment,a),s=!1},d(a){z(e,a)}}}function Jt(n,e,s){let{$$slots:t={},$$scope:l}=e;const a=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"}]];return n.$$set=r=>{s(1,e=te(te({},e),ue(r))),"$$scope"in r&&s(3,l=r.$$scope)},e=ue(e),[a,e,t,l]}class qt extends re{constructor(e){super(),oe(this,e,Jt,zt,ie,{})}}function Wt(n){let e;const s=n[2].default,t=Ce(s,n,n[3],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,a){t&&t.m(l,a),e=!0},p(l,a){t&&t.p&&(!e||a&8)&&Me(t,s,l,l[3],e?Ie(s,l[3],a,null):ke(l[3]),null)},i(l){e||(F(t,l),e=!0)},o(l){B(t,l),e=!1},d(l){t&&t.d(l)}}}function Gt(n){let e,s;const t=[{name:"table"},n[1],{iconNode:n[0]}];let l={$$slots:{default:[Wt]},$$scope:{ctx:n}};for(let a=0;a<t.length;a+=1)l=te(l,t[a]);return e=new Re({props:l}),{c(){q(e.$$.fragment)},l(a){W(e.$$.fragment,a)},m(a,r){J(e,a,r),s=!0},p(a,[r]){const o=r&3?Ve(t,[t[0],r&2&&Ne(a[1]),r&1&&{iconNode:a[0]}]):{};r&8&&(o.$$scope={dirty:r,ctx:a}),e.$set(o)},i(a){s||(F(e.$$.fragment,a),s=!0)},o(a){B(e.$$.fragment,a),s=!1},d(a){z(e,a)}}}function Kt(n,e,s){let{$$slots:t={},$$scope:l}=e;const a=[["path",{d:"M12 3v18"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"M3 9h18"}],["path",{d:"M3 15h18"}]];return n.$$set=r=>{s(1,e=te(te({},e),ue(r))),"$$scope"in r&&s(3,l=r.$$scope)},e=ue(e),[a,e,t,l]}class Zt extends re{constructor(e){super(),oe(this,e,Kt,Gt,ie,{})}}function Qt(n){let e;const s=n[2].default,t=Ce(s,n,n[3],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,a){t&&t.m(l,a),e=!0},p(l,a){t&&t.p&&(!e||a&8)&&Me(t,s,l,l[3],e?Ie(s,l[3],a,null):ke(l[3]),null)},i(l){e||(F(t,l),e=!0)},o(l){B(t,l),e=!1},d(l){t&&t.d(l)}}}function Xt(n){let e,s;const t=[{name:"trending-up"},n[1],{iconNode:n[0]}];let l={$$slots:{default:[Qt]},$$scope:{ctx:n}};for(let a=0;a<t.length;a+=1)l=te(l,t[a]);return e=new Re({props:l}),{c(){q(e.$$.fragment)},l(a){W(e.$$.fragment,a)},m(a,r){J(e,a,r),s=!0},p(a,[r]){const o=r&3?Ve(t,[t[0],r&2&&Ne(a[1]),r&1&&{iconNode:a[0]}]):{};r&8&&(o.$$scope={dirty:r,ctx:a}),e.$set(o)},i(a){s||(F(e.$$.fragment,a),s=!0)},o(a){B(e.$$.fragment,a),s=!1},d(a){z(e,a)}}}function Yt(n,e,s){let{$$slots:t={},$$scope:l}=e;const a=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17"}],["polyline",{points:"16 7 22 7 22 13"}]];return n.$$set=r=>{s(1,e=te(te({},e),ue(r))),"$$scope"in r&&s(3,l=r.$$scope)},e=ue(e),[a,e,t,l]}class el extends re{constructor(e){super(),oe(this,e,Yt,Xt,ie,{})}}function tl(n){let e;const s=n[2].default,t=Ce(s,n,n[3],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,a){t&&t.m(l,a),e=!0},p(l,a){t&&t.p&&(!e||a&8)&&Me(t,s,l,l[3],e?Ie(s,l[3],a,null):ke(l[3]),null)},i(l){e||(F(t,l),e=!0)},o(l){B(t,l),e=!1},d(l){t&&t.d(l)}}}function ll(n){let e,s;const t=[{name:"x"},n[1],{iconNode:n[0]}];let l={$$slots:{default:[tl]},$$scope:{ctx:n}};for(let a=0;a<t.length;a+=1)l=te(l,t[a]);return e=new Re({props:l}),{c(){q(e.$$.fragment)},l(a){W(e.$$.fragment,a)},m(a,r){J(e,a,r),s=!0},p(a,[r]){const o=r&3?Ve(t,[t[0],r&2&&Ne(a[1]),r&1&&{iconNode:a[0]}]):{};r&8&&(o.$$scope={dirty:r,ctx:a}),e.$set(o)},i(a){s||(F(e.$$.fragment,a),s=!0)},o(a){B(e.$$.fragment,a),s=!1},d(a){z(e,a)}}}function sl(n,e,s){let{$$slots:t={},$$scope:l}=e;const a=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];return n.$$set=r=>{s(1,e=te(te({},e),ue(r))),"$$scope"in r&&s(3,l=r.$$scope)},e=ue(e),[a,e,t,l]}class It extends re{constructor(e){super(),oe(this,e,sl,ll,ie,{})}}function nt(n){let e;function s(a,r){if(a[2]==="up")return nl;if(a[2]==="down")return al}let t=s(n),l=t&&t(n);return{c(){e=D("div"),l&&l.c(),this.h()},l(a){e=E(a,"DIV",{class:!0});var r=M(e);l&&l.l(r),r.forEach(p),this.h()},h(){f(e,"class","flex items-center justify-center")},m(a,r){U(a,e,r),l&&l.m(e,null)},p(a,r){t===(t=s(a))&&l?l.p(a,r):(l&&l.d(1),l=t&&t(a),l&&(l.c(),l.m(e,null)))},d(a){a&&p(e),l&&l.d()}}}function al(n){let e,s,t;return{c(){e=D("div"),s=D("span"),t=K(n[3]),this.h()},l(l){e=E(l,"DIV",{class:!0});var a=M(e);s=E(a,"SPAN",{class:!0});var r=M(s);t=G(r,n[3]),r.forEach(p),a.forEach(p),this.h()},h(){f(s,"class","text-xs font-semibold text-red-700"),f(e,"class","flex items-center bg-red-50 px-2 py-1 rounded-full")},m(l,a){U(l,e,a),i(e,s),i(s,t)},p(l,a){a&8&&ee(t,l[3])},d(l){l&&p(e)}}}function nl(n){let e,s,t;return{c(){e=D("div"),s=D("span"),t=K(n[3]),this.h()},l(l){e=E(l,"DIV",{class:!0});var a=M(e);s=E(a,"SPAN",{class:!0});var r=M(s);t=G(r,n[3]),r.forEach(p),a.forEach(p),this.h()},h(){f(s,"class","text-xs font-semibold text-green-700"),f(e,"class","flex items-center bg-green-50 px-2 py-1 rounded-full")},m(l,a){U(l,e,a),i(e,s),i(s,t)},p(l,a){a&8&&ee(t,l[3])},d(l){l&&p(e)}}}function rl(n){let e,s,t='<div class="absolute top-0 left-0 w-full h-full" style="background-image: radial-gradient(circle at 20px 20px, rgba(0,85,255,0.1) 2px, transparent 2px); background-size: 40px 40px;"></div>',l,a,r,o,d,g,u,m,x,w,v,y,_,R,C,h=n[2]!=="neutral"&&n[3]&&nt(n);return{c(){e=D("div"),s=D("div"),s.innerHTML=t,l=A(),a=D("div"),r=A(),o=D("div"),d=A(),g=D("div"),u=D("div"),m=D("p"),x=K(n[0]),w=A(),v=D("p"),y=K(n[1]),_=A(),h&&h.c(),R=A(),C=D("div"),this.h()},l($){e=E($,"DIV",{class:!0});var b=M(e);s=E(b,"DIV",{class:!0,"data-svelte-h":!0}),Z(s)!=="svelte-11m7174"&&(s.innerHTML=t),l=N(b),a=E(b,"DIV",{class:!0}),M(a).forEach(p),r=N(b),o=E(b,"DIV",{class:!0}),M(o).forEach(p),d=N(b),g=E(b,"DIV",{class:!0});var T=M(g);u=E(T,"DIV",{class:!0});var V=M(u);m=E(V,"P",{class:!0});var S=M(m);x=G(S,n[0]),S.forEach(p),w=N(V),v=E(V,"P",{class:!0});var c=M(v);y=G(c,n[1]),c.forEach(p),_=N(V),h&&h.l(V),V.forEach(p),T.forEach(p),R=N(b),C=E(b,"DIV",{class:!0}),M(C).forEach(p),b.forEach(p),this.h()},h(){f(s,"class","absolute inset-0 opacity-5"),f(a,"class","absolute inset-0 bg-gradient-to-br from-tap2-blue/5 via-transparent to-blue-600/5 opacity-100 group-hover:opacity-100 transition-opacity duration-300"),f(o,"class","absolute top-2 right-2 w-8 h-8 bg-gradient-to-br from-tap2-blue/10 to-blue-600/10 rounded-full blur-sm opacity-100 group-hover:opacity-100 transition-opacity duration-300"),f(m,"class","text-sm font-semibold text-blue-500 uppercase tracking-wide mb-2"),f(v,"class","text-4xl font-bold text-gray-900 mb-3"),f(u,"class","text-center"),f(g,"class","relative p-6"),f(C,"class","absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-tap2-blue to-blue-600 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"),f(e,"class","relative overflow-hidden rounded-2xl bg-white shadow-lg hover:shadow-xl transition-all duration-300 border-2 border-gray-100/50 animate-fade-in-up group")},m($,b){U($,e,b),i(e,s),i(e,l),i(e,a),i(e,r),i(e,o),i(e,d),i(e,g),i(g,u),i(u,m),i(m,x),i(u,w),i(u,v),i(v,y),i(u,_),h&&h.m(u,null),i(e,R),i(e,C)},p($,[b]){b&1&&ee(x,$[0]),b&2&&ee(y,$[1]),$[2]!=="neutral"&&$[3]?h?h.p($,b):(h=nt($),h.c(),h.m(u,null)):h&&(h.d(1),h=null)},i:fe,o:fe,d($){$&&p(e),h&&h.d()}}}function ol(n,e,s){let{title:t}=e,{value:l}=e,{icon:a}=e,{trend:r="neutral"}=e,{trendValue:o=""}=e;return n.$$set=d=>{"title"in d&&s(0,t=d.title),"value"in d&&s(1,l=d.value),"icon"in d&&s(4,a=d.icon),"trend"in d&&s(2,r=d.trend),"trendValue"in d&&s(3,o=d.trendValue)},[t,l,r,o,a]}class ze extends re{constructor(e){super(),oe(this,e,ol,rl,ie,{title:0,value:1,icon:4,trend:2,trendValue:3})}}function il(n){let e,s,t,l,a,r,o,d,g;return s=new ze({props:{title:"Total Programs",value:n[0].totalPrograms||0,icon:Ze,trend:"up",trendValue:"+1 this month"}}),l=new ze({props:{title:"Active Cards",value:(n[0].totalActiveCards||0).toLocaleString(),icon:At,trend:"up",trendValue:"+12% this month"}}),r=new ze({props:{title:"Total Redemptions",value:(n[0].totalRedemptions||0).toLocaleString(),icon:el,trend:"up",trendValue:"+8% this month"}}),d=new ze({props:{title:"Avg Engagement",value:n[0].avgEngagement?`${n[0].avgEngagement}%`:"0%",icon:kt,trend:"up",trendValue:"+3% this month"}}),{c(){e=D("div"),q(s.$$.fragment),t=A(),q(l.$$.fragment),a=A(),q(r.$$.fragment),o=A(),q(d.$$.fragment),this.h()},l(u){e=E(u,"DIV",{class:!0});var m=M(e);W(s.$$.fragment,m),t=N(m),W(l.$$.fragment,m),a=N(m),W(r.$$.fragment,m),o=N(m),W(d.$$.fragment,m),m.forEach(p),this.h()},h(){f(e,"class","grid grid-cols-2 md:grid-cols-4 gap-6 mb-8")},m(u,m){U(u,e,m),J(s,e,null),i(e,t),J(l,e,null),i(e,a),J(r,e,null),i(e,o),J(d,e,null),g=!0},p(u,[m]){const x={};m&1&&(x.value=u[0].totalPrograms||0),s.$set(x);const w={};m&1&&(w.value=(u[0].totalActiveCards||0).toLocaleString()),l.$set(w);const v={};m&1&&(v.value=(u[0].totalRedemptions||0).toLocaleString()),r.$set(v);const y={};m&1&&(y.value=u[0].avgEngagement?`${u[0].avgEngagement}%`:"0%"),d.$set(y)},i(u){g||(F(s.$$.fragment,u),F(l.$$.fragment,u),F(r.$$.fragment,u),F(d.$$.fragment,u),g=!0)},o(u){B(s.$$.fragment,u),B(l.$$.fragment,u),B(r.$$.fragment,u),B(d.$$.fragment,u),g=!1},d(u){u&&p(e),z(s),z(l),z(r),z(d)}}}function dl(n,e,s){let{filteredData:t}=e;return n.$$set=l=>{"filteredData"in l&&s(0,t=l.filteredData)},[t]}class cl extends re{constructor(e){super(),oe(this,e,dl,il,ie,{filteredData:0})}}function rt(n,e,s){const t=n.slice();return t[11]=e[s],t}function ot(n,e,s){const t=n.slice();return t[11]=e[s],t[13]=s,t}function it(n,e,s){const t=n.slice();return t[11]=e[s],t[13]=s,t}function fl(n){let e,s,t,l,a,r,o,d,g,u,m,x,w,v,y=ne(n[2]),_=[];for(let h=0;h<y.length;h+=1)_[h]=dt(ot(n,y,h));let R=ne(n[2]),C=[];for(let h=0;h<R.length;h+=1)C[h]=ct(rt(n,R,h));return{c(){e=D("div"),s=ve("svg"),t=ve("defs"),l=ve("pattern"),a=ve("path"),r=ve("rect"),o=ve("path");for(let h=0;h<_.length;h+=1)_[h].c();m=A(),x=D("div");for(let h=0;h<C.length;h+=1)C[h].c();this.h()},l(h){e=E(h,"DIV",{class:!0});var $=M(e);s=pe($,"svg",{class:!0,viewBox:!0});var b=M(s);t=pe(b,"defs",{});var T=M(t);l=pe(T,"pattern",{id:!0,width:!0,height:!0,patternUnits:!0});var V=M(l);a=pe(V,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0}),M(a).forEach(p),V.forEach(p),T.forEach(p),r=pe(b,"rect",{width:!0,height:!0,fill:!0}),M(r).forEach(p),o=pe(b,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),M(o).forEach(p);for(let c=0;c<_.length;c+=1)_[c].l(b);b.forEach(p),m=N($),x=E($,"DIV",{class:!0});var S=M(x);for(let c=0;c<C.length;c+=1)C[c].l(S);S.forEach(p),$.forEach(p),this.h()},h(){f(a,"d","M 40 0 L 0 0 0 40"),f(a,"fill","none"),f(a,"stroke","#f3f4f6"),f(a,"stroke-width","1"),f(l,"id","grid"),f(l,"width","40"),f(l,"height","40"),f(l,"patternUnits","userSpaceOnUse"),f(r,"width","100%"),f(r,"height","100%"),f(r,"fill","url(#grid)"),f(o,"d",d="M "+n[2].map(n[8]).join(" L ")),f(o,"fill","none"),f(o,"stroke","#0055FF"),f(o,"stroke-width","3"),f(o,"stroke-linecap","round"),f(o,"stroke-linejoin","round"),f(s,"class",g="w-full h-full "+(n[6]?"min-w-[800px]":"")),f(s,"viewBox",u=n[6]?"0 0 800 200":"0 0 400 200"),f(x,"class",w="absolute bottom-0 left-0 right-0 flex justify-between text-xs text-gray-600 "+(n[6]?"min-w-[800px]":"")),f(e,"class",v="relative h-48 "+(n[6]?"overflow-x-auto":""))},m(h,$){U(h,e,$),i(e,s),i(s,t),i(t,l),i(l,a),i(s,r),i(s,o);for(let b=0;b<_.length;b+=1)_[b]&&_[b].m(s,null);i(e,m),i(e,x);for(let b=0;b<C.length;b+=1)C[b]&&C[b].m(x,null)},p(h,$){if($&100&&d!==(d="M "+h[2].map(h[8]).join(" L "))&&f(o,"d",d),$&100){y=ne(h[2]);let b;for(b=0;b<y.length;b+=1){const T=ot(h,y,b);_[b]?_[b].p(T,$):(_[b]=dt(T),_[b].c(),_[b].m(s,null))}for(;b<_.length;b+=1)_[b].d(1);_.length=y.length}if($&64&&g!==(g="w-full h-full "+(h[6]?"min-w-[800px]":""))&&f(s,"class",g),$&64&&u!==(u=h[6]?"0 0 800 200":"0 0 400 200")&&f(s,"viewBox",u),$&4){R=ne(h[2]);let b;for(b=0;b<R.length;b+=1){const T=rt(h,R,b);C[b]?C[b].p(T,$):(C[b]=ct(T),C[b].c(),C[b].m(x,null))}for(;b<C.length;b+=1)C[b].d(1);C.length=R.length}$&64&&w!==(w="absolute bottom-0 left-0 right-0 flex justify-between text-xs text-gray-600 "+(h[6]?"min-w-[800px]":""))&&f(x,"class",w),$&64&&v!==(v="relative h-48 "+(h[6]?"overflow-x-auto":""))&&f(e,"class",v)},d(h){h&&p(e),ye(_,h),ye(C,h)}}}function ul(n){let e,s,t=ne(n[2]),l=[];for(let a=0;a<t.length;a+=1)l[a]=ft(it(n,t,a));return{c(){e=D("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=E(a,"DIV",{class:!0});var r=M(e);for(let o=0;o<l.length;o+=1)l[o].l(r);r.forEach(p),this.h()},h(){f(e,"class",s="flex items-end justify-between h-40 space-x-2 mt-[5rem] "+(n[6]?"min-w-[600px]":""))},m(a,r){U(a,e,r);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null)},p(a,r){if(r&36){t=ne(a[2]);let o;for(o=0;o<t.length;o+=1){const d=it(a,t,o);l[o]?l[o].p(d,r):(l[o]=ft(d),l[o].c(),l[o].m(e,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=t.length}r&64&&s!==(s="flex items-end justify-between h-40 space-x-2 mt-[5rem] "+(a[6]?"min-w-[600px]":""))&&f(e,"class",s)},d(a){a&&p(e),ye(l,a)}}}function dt(n){let e,s,t;return{c(){e=ve("circle"),this.h()},l(l){e=pe(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0,class:!0}),M(e).forEach(p),this.h()},h(){f(e,"cx",s=n[13]*(n[6],60)+20),f(e,"cy",t=180-(n[11].cards||n[11].redemptions||0)/n[5]*160),f(e,"r","4"),f(e,"fill","#0055FF"),f(e,"class","hover:r-6 transition-all duration-200")},m(l,a){U(l,e,a)},p(l,a){a&64&&s!==(s=l[13]*(l[6],60)+20)&&f(e,"cx",s),a&36&&t!==(t=180-(l[11].cards||l[11].redemptions||0)/l[5]*160)&&f(e,"cy",t)},d(l){l&&p(e)}}}function ct(n){let e,s=(n[11].month||n[11].day)+"",t;return{c(){e=D("span"),t=K(s)},l(l){e=E(l,"SPAN",{});var a=M(e);t=G(a,s),a.forEach(p)},m(l,a){U(l,e,a),i(e,t)},p(l,a){a&4&&s!==(s=(l[11].month||l[11].day)+"")&&ee(t,s)},d(l){l&&p(e)}}}function ft(n){let e,s,t,l,a,r=(n[11].business?n[11].business.split(" ")[0]:n[11].day||n[11].month)+"",o,d,g,u=(n[11].cards||n[11].redemptions||n[11].engagement||0)+"",m,x;return{c(){e=D("div"),s=D("div"),l=A(),a=D("div"),o=K(r),d=A(),g=D("div"),m=K(u),x=A(),this.h()},l(w){e=E(w,"DIV",{class:!0});var v=M(e);s=E(v,"DIV",{class:!0,style:!0,title:!0}),M(s).forEach(p),l=N(v),a=E(v,"DIV",{class:!0});var y=M(a);o=G(y,r),y.forEach(p),d=N(v),g=E(v,"DIV",{class:!0});var _=M(g);m=G(_,u),_.forEach(p),x=N(v),v.forEach(p),this.h()},h(){f(s,"class","w-full bg-gradient-to-t from-tap2-blue to-blue-600 rounded-t-lg transition-all duration-500 hover:from-blue-600 hover:to-blue-700"),tt(s,"height",(n[11].cards||n[11].redemptions||n[11].engagement||0)/n[5]*140+"px"),f(s,"title",t=(n[11].business||n[11].day||n[11].month)+": "+(n[11].cards||n[11].redemptions||n[11].engagement||0)),f(a,"class","mt-2 text-xs text-gray-600 text-center"),f(g,"class","text-xs font-semibold text-gray-900 mt-1"),f(e,"class","flex flex-col items-center flex-1")},m(w,v){U(w,e,v),i(e,s),i(e,l),i(e,a),i(a,o),i(e,d),i(e,g),i(g,m),i(e,x)},p(w,v){v&36&&tt(s,"height",(w[11].cards||w[11].redemptions||w[11].engagement||0)/w[5]*140+"px"),v&4&&t!==(t=(w[11].business||w[11].day||w[11].month)+": "+(w[11].cards||w[11].redemptions||w[11].engagement||0))&&f(s,"title",t),v&4&&r!==(r=(w[11].business?w[11].business.split(" ")[0]:w[11].day||w[11].month)+"")&&ee(o,r),v&4&&u!==(u=(w[11].cards||w[11].redemptions||w[11].engagement||0)+"")&&ee(m,u)},d(w){w&&p(e)}}}function hl(n){var o,d;let e,s,t,l,a=(o=n[2][0])!=null&&o.cards?"Active Cards":(d=n[2][0])!=null&&d.redemptions?"Redemptions":"Engagement %",r;return{c(){e=D("div"),s=D("div"),t=A(),l=D("span"),r=K(a),this.h()},l(g){e=E(g,"DIV",{class:!0});var u=M(e);s=E(u,"DIV",{class:!0}),M(s).forEach(p),t=N(u),l=E(u,"SPAN",{class:!0});var m=M(l);r=G(m,a),m.forEach(p),u.forEach(p),this.h()},h(){f(s,"class","w-3 h-3 bg-gradient-to-r from-tap2-blue to-blue-600 rounded mr-2"),f(l,"class","text-sm text-gray-600"),f(e,"class","flex items-center")},m(g,u){U(g,e,u),i(e,s),i(e,t),i(e,l),i(l,r)},p(g,u){var m,x;u&4&&a!==(a=(m=g[2][0])!=null&&m.cards?"Active Cards":(x=g[2][0])!=null&&x.redemptions?"Redemptions":"Engagement %")&&ee(r,a)},d(g){g&&p(e)}}}function ml(n){let e,s='<div class="w-3 h-3 bg-tap2-blue rounded-full mr-2"></div> <span class="text-sm text-gray-600">Cards Issued</span>',t,l,a='<div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div> <span class="text-sm text-gray-600">Redemptions</span>';return{c(){e=D("div"),e.innerHTML=s,t=A(),l=D("div"),l.innerHTML=a,this.h()},l(r){e=E(r,"DIV",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-1du0fwo"&&(e.innerHTML=s),t=N(r),l=E(r,"DIV",{class:!0,"data-svelte-h":!0}),Z(l)!=="svelte-1autwn3"&&(l.innerHTML=a),this.h()},h(){f(e,"class","flex items-center"),f(l,"class","flex items-center")},m(r,o){U(r,e,o),U(r,t,o),U(r,l,o)},p:fe,d(r){r&&(p(e),p(t),p(l))}}}function gl(n){let e,s,t,l,a,r,o,d,g,u,m,x,w;function v($,b){if($[3]==="bar")return ul;if($[3]==="line")return fl}let y=v(n),_=y&&y(n);function R($,b){if($[3]==="line")return ml;if($[3]==="bar")return hl}let C=R(n),h=C&&C(n);return{c(){e=D("div"),s=D("div"),t=D("h3"),l=K(n[0]),a=A(),r=D("p"),o=K(n[1]),d=A(),g=D("div"),_&&_.c(),m=A(),x=D("div"),h&&h.c(),this.h()},l($){e=E($,"DIV",{class:!0});var b=M(e);s=E(b,"DIV",{class:!0});var T=M(s);t=E(T,"H3",{class:!0});var V=M(t);l=G(V,n[0]),V.forEach(p),a=N(T),r=E(T,"P",{class:!0});var S=M(r);o=G(S,n[1]),S.forEach(p),T.forEach(p),d=N(b),g=E(b,"DIV",{class:!0});var c=M(g);_&&_.l(c),c.forEach(p),m=N(b),x=E(b,"DIV",{class:!0});var k=M(x);h&&h.l(k),k.forEach(p),b.forEach(p),this.h()},h(){f(t,"class","text-lg font-semibold text-gray-900"),f(r,"class","text-sm text-gray-600"),f(s,"class","mb-6"),f(g,"class",u="relative "+(n[6]?"overflow-x-auto":"")),f(x,"class","mt-4 flex items-center justify-center space-x-6"),f(e,"class",w="bg-white rounded-xl shadow-sm border border-gray-200 p-6 "+(n[4]?"col-span-1 lg:col-span-2":""))},m($,b){U($,e,b),i(e,s),i(s,t),i(t,l),i(s,a),i(s,r),i(r,o),i(e,d),i(e,g),_&&_.m(g,null),i(e,m),i(e,x),h&&h.m(x,null)},p($,[b]){b&1&&ee(l,$[0]),b&2&&ee(o,$[1]),y===(y=v($))&&_?_.p($,b):(_&&_.d(1),_=y&&y($),_&&(_.c(),_.m(g,null))),b&64&&u!==(u="relative "+($[6]?"overflow-x-auto":""))&&f(g,"class",u),C===(C=R($))&&h?h.p($,b):(h&&h.d(1),h=C&&C($),h&&(h.c(),h.m(x,null))),b&16&&w!==(w="bg-white rounded-xl shadow-sm border border-gray-200 p-6 "+($[4]?"col-span-1 lg:col-span-2":""))&&f(e,"class",w)},i:fe,o:fe,d($){$&&p(e),_&&_.d(),h&&h.d()}}}function pl(n,e,s){let t,l,a,{title:r}=e,{subtitle:o}=e,{data:d}=e,{type:g="bar"}=e,{fullWidth:u=!1}=e;const m=(x,w)=>`${w*60+20},${180-(x.cards||x.redemptions||0)/a*160}`;return n.$$set=x=>{"title"in x&&s(0,r=x.title),"subtitle"in x&&s(1,o=x.subtitle),"data"in x&&s(2,d=x.data),"type"in x&&s(3,g=x.type),"fullWidth"in x&&s(4,u=x.fullWidth)},n.$$.update=()=>{var x;n.$$.dirty&4&&s(7,t=Math.max(...d.map(w=>w.cards||w.redemptions||w.engagement||0))),n.$$.dirty&16,n.$$.dirty&4&&s(6,l=d.length>6&&((x=d[0])==null?void 0:x.month)),n.$$.dirty&128&&s(5,a=t===0?1:t)},[r,o,d,g,u,a,l,t,m]}class Ke extends re{constructor(e){super(),oe(this,e,pl,gl,ie,{title:0,subtitle:1,data:2,type:3,fullWidth:4})}}function vl(n){let e,s,t,l,a,r,o;return s=new Ke({props:{title:"Monthly Growth",subtitle:"New cards vs. Redemptions",data:n[0].monthlyGrowth,type:"line"}}),l=new Ke({props:{title:"Business Performance",subtitle:"Engagement by business",data:n[0].businessPerformance,type:"bar"}}),r=new Ke({props:{title:"Weekly Redemptions",subtitle:"Redemptions over the last 7 days",data:n[0].weeklyRedemptions,type:"bar",fullWidth:!0}}),{c(){e=D("div"),q(s.$$.fragment),t=A(),q(l.$$.fragment),a=A(),q(r.$$.fragment),this.h()},l(d){e=E(d,"DIV",{class:!0});var g=M(e);W(s.$$.fragment,g),t=N(g),W(l.$$.fragment,g),a=N(g),W(r.$$.fragment,g),g.forEach(p),this.h()},h(){f(e,"class","grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8")},m(d,g){U(d,e,g),J(s,e,null),i(e,t),J(l,e,null),i(e,a),J(r,e,null),o=!0},p(d,[g]){const u={};g&1&&(u.data=d[0].monthlyGrowth),s.$set(u);const m={};g&1&&(m.data=d[0].businessPerformance),l.$set(m);const x={};g&1&&(x.data=d[0].weeklyRedemptions),r.$set(x)},i(d){o||(F(s.$$.fragment,d),F(l.$$.fragment,d),F(r.$$.fragment,d),o=!0)},o(d){B(s.$$.fragment,d),B(l.$$.fragment,d),B(r.$$.fragment,d),o=!1},d(d){d&&p(e),z(s),z(l),z(r)}}}function bl(n,e,s){let{chartData:t}=e;return n.$$set=l=>{"chartData"in l&&s(0,t=l.chartData)},[t]}class _l extends re{constructor(e){super(),oe(this,e,bl,vl,ie,{chartData:0})}}function ut(n,e,s){const t=n.slice();return t[2]=e[s],t[4]=s,t}function ht(n,e,s){const t=n.slice();return t[5]=e[s],t[4]=s,t}function mt(n){let e,s,t,l,a,r,o=n[5].message+"",d,g,u,m=n[5].time+"",x,w,v;return{c(){e=D("div"),s=D("div"),l=A(),a=D("div"),r=D("p"),d=K(o),g=A(),u=D("p"),x=K(m),w=A(),this.h()},l(y){e=E(y,"DIV",{class:!0});var _=M(e);s=E(_,"DIV",{class:!0}),M(s).forEach(p),l=N(_),a=E(_,"DIV",{class:!0});var R=M(a);r=E(R,"P",{class:!0});var C=M(r);d=G(C,o),C.forEach(p),g=N(R),u=E(R,"P",{class:!0});var h=M(u);x=G(h,m),h.forEach(p),R.forEach(p),w=N(_),_.forEach(p),this.h()},h(){f(s,"class",t="w-2 h-2 rounded-full mt-2 flex-shrink-0 "+(n[5].type==="card"?"bg-tap2-blue":n[5].type==="redemption"?"bg-green-500":n[5].type==="update"?"bg-yellow-500":n[5].type==="stats"?"bg-purple-500":"bg-gray-400")),f(r,"class","text-sm text-gray-900"),f(u,"class","text-xs text-gray-500"),f(a,"class","flex-1 min-w-0"),f(e,"class",v="flex items-start space-x-3 py-2 "+(n[4]<n[0].length-1?"border-b border-gray-100":""))},m(y,_){U(y,e,_),i(e,s),i(e,l),i(e,a),i(a,r),i(r,d),i(a,g),i(a,u),i(u,x),i(e,w)},p(y,_){_&1&&t!==(t="w-2 h-2 rounded-full mt-2 flex-shrink-0 "+(y[5].type==="card"?"bg-tap2-blue":y[5].type==="redemption"?"bg-green-500":y[5].type==="update"?"bg-yellow-500":y[5].type==="stats"?"bg-purple-500":"bg-gray-400"))&&f(s,"class",t),_&1&&o!==(o=y[5].message+"")&&ee(d,o),_&1&&m!==(m=y[5].time+"")&&ee(x,m),_&1&&v!==(v="flex items-start space-x-3 py-2 "+(y[4]<y[0].length-1?"border-b border-gray-100":""))&&f(e,"class",v)},d(y){y&&p(e)}}}function gt(n){let e,s,t,l,a,r=n[2].businessName+"",o;return{c(){e=D("div"),s=D("span"),t=ve("svg"),l=ve("path"),a=A(),o=K(r),this.h()},l(d){e=E(d,"DIV",{class:!0});var g=M(e);s=E(g,"SPAN",{class:!0});var u=M(s);t=pe(u,"svg",{class:!0,fill:!0,viewBox:!0});var m=M(t);l=pe(m,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),M(l).forEach(p),m.forEach(p),a=N(u),o=G(u,r),u.forEach(p),g.forEach(p),this.h()},h(){f(l,"fill-rule","evenodd"),f(l,"d","M4 4a2 2 0 012-2h8a2 2 0 012 2v12a1 1 0 110 2h-3a1 1 0 01-1-1v-6a1 1 0 00-1-1H9a1 1 0 00-1 1v6a1 1 0 01-1 1H4a1 1 0 110-2V4zm3 1h2v2H7V5zm2 4H7v2h2V9zm2-4h2v2h-2V5zm2 4h-2v2h2V9z"),f(l,"clip-rule","evenodd"),f(t,"class","w-3 h-3 mr-1"),f(t,"fill","currentColor"),f(t,"viewBox","0 0 20 20"),f(s,"class","inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-700"),f(e,"class","mt-3")},m(d,g){U(d,e,g),i(e,s),i(s,t),i(t,l),i(s,a),i(s,o)},p(d,g){g&2&&r!==(r=d[2].businessName+"")&&ee(o,r)},d(d){d&&p(e)}}}function pt(n){let e,s,t,l=n[2].priority+"",a,r,o,d,g,u,m=n[2].title+"",x,w,v,y=n[2].description+"",_,R,C=n[2].businessName&&gt(n);return{c(){e=D("div"),s=D("div"),t=D("span"),a=K(l),o=A(),d=D("div"),g=D("div"),u=D("h4"),x=K(m),w=A(),v=D("p"),_=K(y),R=A(),C&&C.c(),this.h()},l(h){e=E(h,"DIV",{class:!0});var $=M(e);s=E($,"DIV",{class:!0});var b=M(s);t=E(b,"SPAN",{class:!0});var T=M(t);a=G(T,l),T.forEach(p),b.forEach(p),o=N($),d=E($,"DIV",{class:!0});var V=M(d);g=E(V,"DIV",{class:!0});var S=M(g);u=E(S,"H4",{class:!0});var c=M(u);x=G(c,m),c.forEach(p),w=N(S),v=E(S,"P",{class:!0});var k=M(v);_=G(k,y),k.forEach(p),R=N(S),C&&C.l(S),S.forEach(p),V.forEach(p),$.forEach(p),this.h()},h(){f(t,"class",r="px-2 py-1 text-xs font-medium rounded-full "+(n[2].priority==="high"?"bg-red-100 text-red-700":n[2].priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700")),f(s,"class","absolute top-3 right-3"),f(u,"class","text-sm font-bold text-gray-900 mb-2 group-hover:text-blue-700 transition-colors"),f(v,"class","text-sm text-gray-600 leading-relaxed"),f(g,"class","flex-1 min-w-0"),f(d,"class","flex items-start pr-16"),f(e,"class","group relative p-4 bg-white/70 backdrop-blur-sm rounded-lg border border-blue-100/50 hover:bg-white hover:shadow-sm transition-all duration-200 hover:border-blue-200")},m(h,$){U(h,e,$),i(e,s),i(s,t),i(t,a),i(e,o),i(e,d),i(d,g),i(g,u),i(u,x),i(g,w),i(g,v),i(v,_),i(g,R),C&&C.m(g,null)},p(h,$){$&2&&l!==(l=h[2].priority+"")&&ee(a,l),$&2&&r!==(r="px-2 py-1 text-xs font-medium rounded-full "+(h[2].priority==="high"?"bg-red-100 text-red-700":h[2].priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"))&&f(t,"class",r),$&2&&m!==(m=h[2].title+"")&&ee(x,m),$&2&&y!==(y=h[2].description+"")&&ee(_,y),h[2].businessName?C?C.p(h,$):(C=gt(h),C.c(),C.m(g,null)):C&&(C.d(1),C=null)},d(h){h&&p(e),C&&C.d()}}}function vt(n){let e,s='<div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg></div> <h4 class="text-sm font-medium text-gray-900 mb-2">No Insights Available</h4> <p class="text-sm text-gray-500">Add some businesses to generate insights.</p>';return{c(){e=D("div"),e.innerHTML=s,this.h()},l(t){e=E(t,"DIV",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-7oj3kq"&&(e.innerHTML=s),this.h()},h(){f(e,"class","text-center py-8")},m(t,l){U(t,e,l)},d(t){t&&p(e)}}}function yl(n){let e,s,t,l="Recent Activity",a,r,o,d,g,u='<div class="absolute top-0 right-0 w-32 h-32 bg-blue-500 rounded-full -translate-y-16 translate-x-16"></div> <div class="absolute bottom-0 left-0 w-24 h-24 bg-blue-400 rounded-full translate-y-12 -translate-x-12"></div>',m,x,w,v,y='<div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center"><svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg></div> <h3 class="text-xl font-bold text-gray-900">Key Insights</h3>',_,R,C=n[1].length+"",h,$,b,T,V,S=ne(n[0]),c=[];for(let j=0;j<S.length;j+=1)c[j]=mt(ht(n,S,j));let k=ne(n[1]),I=[];for(let j=0;j<k.length;j+=1)I[j]=pt(ut(n,k,j));let P=n[1].length===0&&vt();return{c(){e=D("div"),s=D("div"),t=D("h3"),t.textContent=l,a=A(),r=D("div");for(let j=0;j<c.length;j+=1)c[j].c();o=A(),d=D("div"),g=D("div"),g.innerHTML=u,m=A(),x=D("div"),w=D("div"),v=D("div"),v.innerHTML=y,_=A(),R=D("div"),h=K(C),$=K(" insights"),b=A(),T=D("div");for(let j=0;j<I.length;j+=1)I[j].c();V=A(),P&&P.c(),this.h()},l(j){e=E(j,"DIV",{class:!0});var Q=M(e);s=E(Q,"DIV",{class:!0});var L=M(s);t=E(L,"H3",{class:!0,"data-svelte-h":!0}),Z(t)!=="svelte-zalmws"&&(t.textContent=l),a=N(L),r=E(L,"DIV",{class:!0});var X=M(r);for(let me=0;me<c.length;me+=1)c[me].l(X);X.forEach(p),L.forEach(p),o=N(Q),d=E(Q,"DIV",{class:!0});var he=M(d);g=E(he,"DIV",{class:!0,"data-svelte-h":!0}),Z(g)!=="svelte-1fu9hwt"&&(g.innerHTML=u),m=N(he),x=E(he,"DIV",{class:!0});var be=M(x);w=E(be,"DIV",{class:!0});var de=M(w);v=E(de,"DIV",{class:!0,"data-svelte-h":!0}),Z(v)!=="svelte-1xr42zj"&&(v.innerHTML=y),_=N(de),R=E(de,"DIV",{class:!0});var De=M(R);h=G(De,C),$=G(De," insights"),De.forEach(p),de.forEach(p),b=N(be),T=E(be,"DIV",{class:!0});var ge=M(T);for(let me=0;me<I.length;me+=1)I[me].l(ge);V=N(ge),P&&P.l(ge),ge.forEach(p),be.forEach(p),he.forEach(p),Q.forEach(p),this.h()},h(){f(t,"class","text-lg font-semibold text-gray-900 mb-4"),f(r,"class","space-y-3 max-h-80 overflow-auto scrollbar-hide"),f(s,"class","card p-6"),f(g,"class","absolute inset-0 opacity-5"),f(v,"class","flex items-center space-x-3"),f(R,"class","px-3 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded-full"),f(w,"class","flex items-center justify-between mb-6"),f(T,"class","space-y-4 max-h-80 overflow-auto scrollbar-hide"),f(x,"class","relative p-6"),f(d,"class","relative overflow-hidden bg-gradient-to-br from-blue-50 via-white to-blue-50/30 border border-blue-200/50 rounded-xl shadow-sm hover:shadow-md transition-all duration-300"),f(e,"class","grid grid-cols-1 lg:grid-cols-2 gap-6")},m(j,Q){U(j,e,Q),i(e,s),i(s,t),i(s,a),i(s,r);for(let L=0;L<c.length;L+=1)c[L]&&c[L].m(r,null);i(e,o),i(e,d),i(d,g),i(d,m),i(d,x),i(x,w),i(w,v),i(w,_),i(w,R),i(R,h),i(R,$),i(x,b),i(x,T);for(let L=0;L<I.length;L+=1)I[L]&&I[L].m(T,null);i(T,V),P&&P.m(T,null)},p(j,[Q]){if(Q&1){S=ne(j[0]);let L;for(L=0;L<S.length;L+=1){const X=ht(j,S,L);c[L]?c[L].p(X,Q):(c[L]=mt(X),c[L].c(),c[L].m(r,null))}for(;L<c.length;L+=1)c[L].d(1);c.length=S.length}if(Q&2&&C!==(C=j[1].length+"")&&ee(h,C),Q&2){k=ne(j[1]);let L;for(L=0;L<k.length;L+=1){const X=ut(j,k,L);I[L]?I[L].p(X,Q):(I[L]=pt(X),I[L].c(),I[L].m(T,V))}for(;L<I.length;L+=1)I[L].d(1);I.length=k.length}j[1].length===0?P||(P=vt(),P.c(),P.m(T,null)):P&&(P.d(1),P=null)},i:fe,o:fe,d(j){j&&p(e),ye(c,j),ye(I,j),P&&P.d()}}}function wl(n,e,s){let{recentActivity:t}=e,{insights:l}=e;return n.$$set=a=>{"recentActivity"in a&&s(0,t=a.recentActivity),"insights"in a&&s(1,l=a.insights)},[t,l]}class El extends re{constructor(e){super(),oe(this,e,wl,yl,ie,{recentActivity:0,insights:1})}}function bt(n,e,s){const t=n.slice();return t[5]=e[s],t}function _t(n){let e,s,t,l,a,r,o,d=n[5].label+"",g,u,m,x=n[5].description+"",w,v,y,_,R;var C=n[5].icon;function h(b,T){return{props:{class:"w-6 h-6 text-white"}}}C&&(l=lt(C,h()));function $(){return n[3](n[5])}return{c(){e=D("button"),s=D("div"),t=D("div"),l&&q(l.$$.fragment),a=A(),r=D("div"),o=D("h4"),g=K(d),u=A(),m=D("p"),w=K(x),v=A(),this.h()},l(b){e=E(b,"BUTTON",{class:!0});var T=M(e);s=E(T,"DIV",{class:!0});var V=M(s);t=E(V,"DIV",{class:!0});var S=M(t);l&&W(l.$$.fragment,S),S.forEach(p),a=N(V),r=E(V,"DIV",{class:!0});var c=M(r);o=E(c,"H4",{class:!0});var k=M(o);g=G(k,d),k.forEach(p),u=N(c),m=E(c,"P",{class:!0});var I=M(m);w=G(I,x),I.forEach(p),c.forEach(p),V.forEach(p),v=N(T),T.forEach(p),this.h()},h(){f(t,"class","w-12 h-12 "+n[5].color+" rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-200"),f(o,"class","font-semibold text-gray-900 group-hover:text-tap2-blue transition-colors"),f(m,"class","text-sm text-gray-600"),f(r,"class","flex-1 text-left"),f(s,"class","flex items-center space-x-4"),f(e,"class","w-full p-4 border-2 border-gray-200 rounded-xl hover:border-tap2-blue hover:bg-blue-50 transition-all duration-200 group")},m(b,T){U(b,e,T),i(e,s),i(s,t),l&&J(l,t,null),i(s,a),i(s,r),i(r,o),i(o,g),i(r,u),i(r,m),i(m,w),i(e,v),y=!0,_||(R=ce(e,"click",$),_=!0)},p(b,T){if(n=b,C!==(C=n[5].icon)){if(l){Le();const V=l;B(V.$$.fragment,1,0,()=>{z(V,1)}),Pe()}C?(l=lt(C,h()),q(l.$$.fragment),F(l.$$.fragment,1),J(l,t,null)):l=null}},i(b){y||(l&&F(l.$$.fragment,b),y=!0)},o(b){l&&B(l.$$.fragment,b),y=!1},d(b){b&&p(e),l&&z(l),_=!1,R()}}}function Dl(n){let e,s,t,l,a="Export Analytics Report",r,o,d,g,u,m,x="Choose your preferred export format:",w,v,y,_,R,C="Cancel",h,$,b;d=new It({props:{class:"w-6 h-6"}});let T=ne(n[0]),V=[];for(let c=0;c<T.length;c+=1)V[c]=_t(bt(n,T,c));const S=c=>B(V[c],1,1,()=>{V[c]=null});return{c(){e=D("div"),s=D("div"),t=D("div"),l=D("h3"),l.textContent=a,r=A(),o=D("button"),q(d.$$.fragment),g=A(),u=D("div"),m=D("p"),m.textContent=x,w=A(),v=D("div");for(let c=0;c<V.length;c+=1)V[c].c();y=A(),_=D("div"),R=D("button"),R.textContent=C,this.h()},l(c){e=E(c,"DIV",{class:!0});var k=M(e);s=E(k,"DIV",{class:!0});var I=M(s);t=E(I,"DIV",{class:!0});var P=M(t);l=E(P,"H3",{class:!0,"data-svelte-h":!0}),Z(l)!=="svelte-nu3n2d"&&(l.textContent=a),r=N(P),o=E(P,"BUTTON",{class:!0});var j=M(o);W(d.$$.fragment,j),j.forEach(p),P.forEach(p),g=N(I),u=E(I,"DIV",{class:!0});var Q=M(u);m=E(Q,"P",{class:!0,"data-svelte-h":!0}),Z(m)!=="svelte-zvl4wx"&&(m.textContent=x),w=N(Q),v=E(Q,"DIV",{class:!0});var L=M(v);for(let he=0;he<V.length;he+=1)V[he].l(L);L.forEach(p),Q.forEach(p),y=N(I),_=E(I,"DIV",{class:!0});var X=M(_);R=E(X,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(R)!=="svelte-mx5krw"&&(R.textContent=C),X.forEach(p),I.forEach(p),k.forEach(p),this.h()},h(){f(l,"class","text-xl font-semibold text-gray-900"),f(o,"class","text-gray-400 hover:text-gray-600 transition-colors"),f(t,"class","flex items-center justify-between p-6 border-b border-gray-200"),f(m,"class","text-gray-600 mb-6"),f(v,"class","space-y-4"),f(u,"class","p-6"),f(R,"class","px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors"),f(_,"class","flex items-center justify-end space-x-3 p-6 border-t border-gray-200"),f(s,"class","bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto"),f(e,"class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4")},m(c,k){U(c,e,k),i(e,s),i(s,t),i(t,l),i(t,r),i(t,o),J(d,o,null),i(s,g),i(s,u),i(u,m),i(u,w),i(u,v);for(let I=0;I<V.length;I+=1)V[I]&&V[I].m(v,null);i(s,y),i(s,_),i(_,R),h=!0,$||(b=[ce(o,"click",n[1]),ce(R,"click",n[1])],$=!0)},p(c,[k]){if(k&5){T=ne(c[0]);let I;for(I=0;I<T.length;I+=1){const P=bt(c,T,I);V[I]?(V[I].p(P,k),F(V[I],1)):(V[I]=_t(P),V[I].c(),F(V[I],1),V[I].m(v,null))}for(Le(),I=T.length;I<V.length;I+=1)S(I);Pe()}},i(c){if(!h){F(d.$$.fragment,c);for(let k=0;k<T.length;k+=1)F(V[k]);h=!0}},o(c){B(d.$$.fragment,c),V=V.filter(Boolean);for(let k=0;k<V.length;k+=1)B(V[k]);h=!1},d(c){c&&p(e),z(d),ye(V,c),$=!1,Ge(b)}}}function xl(n){const e=Mt(),s=[{format:"pdf",label:"PDF Report",description:"Complete analytics report with charts and insights",icon:Ot,color:"bg-red-500"},{format:"excel",label:"Excel Spreadsheet",description:"Detailed data tables for further analysis",icon:Zt,color:"bg-green-500"},{format:"json",label:"JSON Data",description:"Raw data for import into other tools",icon:Bt,color:"bg-blue-500"}];function t(){e("close")}function l(r){e("export",r)}return[s,t,l,r=>l(r.format)]}class $l extends re{constructor(e){super(),oe(this,e,xl,Dl,ie,{})}}function yt(n){let e,s;return e=new $l({}),e.$on("close",n[7]),e.$on("export",n[3]),{c(){q(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,l){J(e,t,l),s=!0},p:fe,i(t){s||(F(e.$$.fragment,t),s=!0)},o(t){B(e.$$.fragment,t),s=!1},d(t){z(e,t)}}}function Cl(n){let e,s,t,l,a,r,o,d,g,u,m,x,w=n[0]&&yt(n);return l=new qt({props:{class:"w-4 h-4 mr-2"}}),d=new Ze({props:{class:"w-4 h-4 mr-2"}}),{c(){w&&w.c(),e=A(),s=D("div"),t=D("button"),q(l.$$.fragment),a=K(`\r
    Filters`),r=A(),o=D("button"),q(d.$$.fragment),g=K(`\r
    Export Report`),this.h()},l(v){w&&w.l(v),e=N(v),s=E(v,"DIV",{class:!0});var y=M(s);t=E(y,"BUTTON",{class:!0});var _=M(t);W(l.$$.fragment,_),a=G(_,`\r
    Filters`),_.forEach(p),r=N(y),o=E(y,"BUTTON",{class:!0});var R=M(o);W(d.$$.fragment,R),g=G(R,`\r
    Export Report`),R.forEach(p),y.forEach(p),this.h()},h(){f(t,"class","px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium flex items-center"),f(o,"class","px-4 py-2 bg-tap2-blue text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center"),f(s,"class","mt-4 sm:mt-0 flex space-x-3")},m(v,y){w&&w.m(v,y),U(v,e,y),U(v,s,y),i(s,t),J(l,t,null),i(t,a),i(s,r),i(s,o),J(d,o,null),i(o,g),u=!0,m||(x=[ce(t,"click",n[2]),ce(o,"click",n[1])],m=!0)},p(v,[y]){v[0]?w?(w.p(v,y),y&1&&F(w,1)):(w=yt(v),w.c(),F(w,1),w.m(e.parentNode,e)):w&&(Le(),B(w,1,1,()=>{w=null}),Pe())},i(v){u||(F(w),F(l.$$.fragment,v),F(d.$$.fragment,v),u=!0)},o(v){B(w),B(l.$$.fragment,v),B(d.$$.fragment,v),u=!1},d(v){v&&(p(e),p(s)),w&&w.d(v),z(l),z(d),m=!1,Ge(x)}}}function Ml(n,e,s){let{showExportModal:t=!1}=e,{showFilters:l=!1}=e,{loyaltyCards:a}=e,{filteredData:r}=e;function o(){s(0,t=!t)}function d(){s(4,l=!l)}function g(v){const y=v.detail;try{y==="json"?u():y==="excel"?m():y==="pdf"&&x(),s(0,t=!1)}catch(_){console.error("Export error:",_),alert("Export failed. Please try again.")}}function u(){if(!a||a.length===0){alert("No data available to export. Please add some businesses first.");return}try{const v={reportDate:new Date().toISOString(),summary:{totalPrograms:r.totalPrograms||0,totalActiveCards:r.totalActiveCards||0,totalRedemptions:r.totalRedemptions||0,averageEngagement:r.avgEngagement||0},businesses:a.map(h=>({id:h._id,businessName:h.businessName||"Unknown",location:h.location||"Unknown",activeCards:h.activeCards||0,redemptions:h.redemptions||0,rewardThreshold:h.rewardThreshold||0,engagementRate:Math.round((h.redemptions||0)/(h.activeCards||1)*100)||0,color:h.color||"#0055FF",createdAt:h.createdAt||new Date().toISOString()}))},y=JSON.stringify(v,null,2),_=new Blob([y],{type:"application/json;charset=utf-8;"}),R=URL.createObjectURL(_),C=document.createElement("a");C.href=R,C.download=`analytics-report-${new Date().toISOString().split("T")[0]}.json`,C.style.display="none",document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(R)}catch(v){console.error("JSON download error:",v),alert("Failed to download JSON. Please try again.")}}function m(){if(!a||a.length===0){alert("No data available to export. Please add some businesses first.");return}try{const y=[["Business Name","Location","Active Cards","Redemptions","Engagement Rate (%)","Reward Threshold","Created Date"],...a.map(h=>[h.businessName||"Unknown",h.location||"Unknown",h.activeCards||0,h.redemptions||0,Math.round((h.redemptions||0)/(h.activeCards||1)*100)||0,h.rewardThreshold||0,h.createdAt?new Date(h.createdAt).toLocaleDateString():"Unknown"])].map(h=>h.map($=>`"${$}"`).join(",")).join(`
`),_=new Blob([y],{type:"text/csv;charset=utf-8;"}),R=URL.createObjectURL(_),C=document.createElement("a");C.href=R,C.download=`analytics-report-${new Date().toISOString().split("T")[0]}.xlsx`,C.style.display="none",document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(R)}catch(v){console.error("Excel download error:",v),alert("Failed to download Excel file. Please try again.")}}function x(){if(!a||a.length===0){alert("No data available to export. Please add some businesses first.");return}try{const v=`
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Analytics Report - ${new Date().toLocaleDateString()}</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
        .header { text-align: center; border-bottom: 2px solid #0055FF; padding-bottom: 20px; margin-bottom: 30px; }
        .header h1 { color: #0055FF; margin: 0; }
        .header p { color: #666; margin: 5px 0; }
        .section { margin-bottom: 30px; }
        .section h2 { color: #333; border-bottom: 1px solid #ddd; padding-bottom: 10px; }
        .metrics { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 20px; }
        .metric { background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #0055FF; }
        .metric-label { font-weight: bold; color: #666; font-size: 14px; }
        .metric-value { font-size: 24px; color: #0055FF; margin-top: 5px; }
        .business-table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        .business-table th, .business-table td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
        .business-table th { background: #f8f9fa; font-weight: bold; }
        .business-table tr:hover { background: #f8f9fa; }
        .footer { margin-top: 40px; text-align: center; color: #666; font-size: 12px; border-top: 1px solid #ddd; padding-top: 20px; }
    </style>
</head>
<body>
    <div class="header">
        <h1>Tap2 Loyalty Analytics Report</h1>
        <p>Generated on ${new Date().toLocaleDateString()}</p>
    </div>
    
    <div class="section">
        <h2>Key Metrics</h2>
        <div class="metrics">
            <div class="metric">
                <div class="metric-label">Total Programs</div>
                <div class="metric-value">${r.totalPrograms||0}</div>
            </div>
            <div class="metric">
                <div class="metric-label">Active Cards</div>
                <div class="metric-value">${(r.totalActiveCards||0).toLocaleString()}</div>
            </div>
            <div class="metric">
                <div class="metric-label">Total Redemptions</div>
                <div class="metric-value">${(r.totalRedemptions||0).toLocaleString()}</div>
            </div>
            <div class="metric">
                <div class="metric-label">Average Engagement</div>
                <div class="metric-value">${r.avgEngagement||0}%</div>
            </div>
        </div>
    </div>
    
    <div class="section">
        <h2>Business Performance</h2>
        <table class="business-table">
            <thead>
                <tr>
                    <th>Business Name</th>
                    <th>Location</th>
                    <th>Active Cards</th>
                    <th>Redemptions</th>
                    <th>Engagement Rate</th>
                </tr>
            </thead>
            <tbody>
                ${a.map(C=>`
                    <tr>
                        <td>${C.businessName||"Unknown"}</td>
                        <td>${C.location||"Unknown"}</td>
                        <td>${C.activeCards||0}</td>
                        <td>${C.redemptions||0}</td>
                        <td>${Math.round((C.redemptions||0)/(C.activeCards||1)*100)||0}%</td>
                    </tr>
                `).join("")}
            </tbody>
        </table>
    </div>
    
    <div class="footer">
        <p>Generated by Tap2 Loyalty Dashboard</p>
        <p>Report ID: ${Date.now()}</p>
    </div>
</body>
</html>
      `,y=new Blob([v],{type:"application/pdf;charset=utf-8;"}),_=URL.createObjectURL(y),R=document.createElement("a");R.href=_,R.download=`analytics-report-${new Date().toISOString().split("T")[0]}.pdf`,R.style.display="none",document.body.appendChild(R),R.click(),document.body.removeChild(R),URL.revokeObjectURL(_)}catch(v){console.error("PDF download error:",v),alert("Failed to download PDF. Please try again.")}}const w=()=>s(0,t=!1);return n.$$set=v=>{"showExportModal"in v&&s(0,t=v.showExportModal),"showFilters"in v&&s(4,l=v.showFilters),"loyaltyCards"in v&&s(5,a=v.loyaltyCards),"filteredData"in v&&s(6,r=v.filteredData)},[t,o,d,g,l,a,r,w]}class kl extends re{constructor(e){super(),oe(this,e,Ml,Cl,ie,{showExportModal:0,showFilters:4,loyaltyCards:5,filteredData:6})}}function wt(n,e,s){const t=n.slice();return t[17]=e[s],t}function Et(n,e,s){const t=n.slice();return t[17]=e[s],t}function Dt(n){let e,s=n[17].label+"",t,l;return{c(){e=D("option"),t=K(s),this.h()},l(a){e=E(a,"OPTION",{});var r=M(e);t=G(r,s),r.forEach(p),this.h()},h(){e.__value=l=n[17].value,Ee(e,e.__value)},m(a,r){U(a,e,r),i(e,t)},p(a,r){r&32&&s!==(s=a[17].label+"")&&ee(t,s),r&32&&l!==(l=a[17].value)&&(e.__value=l,Ee(e,e.__value))},d(a){a&&p(e)}}}function xt(n){let e,s=n[17].label+"",t;return{c(){e=D("option"),t=K(s),this.h()},l(l){e=E(l,"OPTION",{});var a=M(e);t=G(a,s),a.forEach(p),this.h()},h(){e.__value=n[17].value,Ee(e,e.__value)},m(l,a){U(l,e,a),i(e,t)},p:fe,d(l){l&&p(e)}}}function $t(n){let e,s,t="Select Custom Date Range",l,a,r,o,d="Start Date",g,u,m,x,w,v="End Date",y,_,R,C;return{c(){e=D("div"),s=D("h4"),s.textContent=t,l=A(),a=D("div"),r=D("div"),o=D("label"),o.textContent=d,g=A(),u=D("input"),m=A(),x=D("div"),w=D("label"),w.textContent=v,y=A(),_=D("input"),this.h()},l(h){e=E(h,"DIV",{class:!0});var $=M(e);s=E($,"H4",{class:!0,"data-svelte-h":!0}),Z(s)!=="svelte-vug10r"&&(s.textContent=t),l=N($),a=E($,"DIV",{class:!0});var b=M(a);r=E(b,"DIV",{});var T=M(r);o=E(T,"LABEL",{class:!0,"data-svelte-h":!0}),Z(o)!=="svelte-1kztlbs"&&(o.textContent=d),g=N(T),u=E(T,"INPUT",{type:!0,class:!0}),T.forEach(p),m=N(b),x=E(b,"DIV",{});var V=M(x);w=E(V,"LABEL",{class:!0,"data-svelte-h":!0}),Z(w)!=="svelte-9hy1xb"&&(w.textContent=v),y=N(V),_=E(V,"INPUT",{type:!0,class:!0}),V.forEach(p),b.forEach(p),$.forEach(p),this.h()},h(){f(s,"class","text-sm font-medium text-gray-700 mb-4"),f(o,"class","block text-xs font-medium text-gray-600 mb-2"),f(u,"type","date"),f(u,"class","w-full px-3 py-2 bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-tap2-blue focus:border-tap2-blue transition-all duration-200"),f(w,"class","block text-xs font-medium text-gray-600 mb-2"),f(_,"type","date"),f(_,"class","w-full px-3 py-2 bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-tap2-blue focus:border-tap2-blue transition-all duration-200"),f(a,"class","grid grid-cols-1 md:grid-cols-2 gap-4"),f(e,"class","mt-6 p-4 bg-gray-50 rounded-xl border border-gray-200")},m(h,$){U(h,e,$),i(e,s),i(e,l),i(e,a),i(a,r),i(r,o),i(r,g),i(r,u),Ee(u,n[3]),i(a,m),i(a,x),i(x,w),i(x,y),i(x,_),Ee(_,n[4]),R||(C=[ce(u,"input",n[14]),ce(_,"input",n[15])],R=!0)},p(h,$){$&8&&Ee(u,h[3]),$&16&&Ee(_,h[4])},d(h){h&&p(e),R=!1,Ge(C)}}}function Il(n){let e,s,t,l="Filter Analytics",a,r,o,d,g,u,m,x="Business",w,v,y,_,R,C='<svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>',h,$,b,T="Date Range",V,S,c,k,I,P,j,Q,L,X,he="Reset",be,de,De="Apply Filters",ge,me,Qe;o=new It({props:{class:"w-5 h-5"}});let xe=ne(n[5]),le=[];for(let H=0;H<xe.length;H+=1)le[H]=Dt(Et(n,xe,H));let $e=ne(n[6]),se=[];for(let H=0;H<$e.length;H+=1)se[H]=xt(wt(n,$e,H));P=new kt({props:{class:"w-5 h-5 text-gray-400"}});let ae=n[2]&&$t(n);return{c(){e=D("div"),s=D("div"),t=D("h3"),t.textContent=l,a=A(),r=D("button"),q(o.$$.fragment),d=A(),g=D("div"),u=D("div"),m=D("label"),m.textContent=x,w=A(),v=D("div"),y=D("select");for(let H=0;H<le.length;H+=1)le[H].c();_=A(),R=D("div"),R.innerHTML=C,h=A(),$=D("div"),b=D("label"),b.textContent=T,V=A(),S=D("div"),c=D("select");for(let H=0;H<se.length;H+=1)se[H].c();k=A(),I=D("div"),q(P.$$.fragment),j=A(),ae&&ae.c(),Q=A(),L=D("div"),X=D("button"),X.textContent=he,be=A(),de=D("button"),de.textContent=De,this.h()},l(H){e=E(H,"DIV",{class:!0});var Y=M(e);s=E(Y,"DIV",{class:!0});var O=M(s);t=E(O,"H3",{class:!0,"data-svelte-h":!0}),Z(t)!=="svelte-sre454"&&(t.textContent=l),a=N(O),r=E(O,"BUTTON",{class:!0});var _e=M(r);W(o.$$.fragment,_e),_e.forEach(p),O.forEach(p),d=N(Y),g=E(Y,"DIV",{class:!0});var Fe=M(g);u=E(Fe,"DIV",{});var Be=M(u);m=E(Be,"LABEL",{class:!0,"data-svelte-h":!0}),Z(m)!=="svelte-kghy6z"&&(m.textContent=x),w=N(Be),v=E(Be,"DIV",{class:!0});var Se=M(v);y=E(Se,"SELECT",{class:!0});var Xe=M(y);for(let we=0;we<le.length;we+=1)le[we].l(Xe);Xe.forEach(p),_=N(Se),R=E(Se,"DIV",{class:!0,"data-svelte-h":!0}),Z(R)!=="svelte-118hveq"&&(R.innerHTML=C),Se.forEach(p),Be.forEach(p),h=N(Fe),$=E(Fe,"DIV",{});var je=M($);b=E(je,"LABEL",{class:!0,"data-svelte-h":!0}),Z(b)!=="svelte-1pnejgc"&&(b.textContent=T),V=N(je),S=E(je,"DIV",{class:!0});var He=M(S);c=E(He,"SELECT",{class:!0});var Ye=M(c);for(let we=0;we<se.length;we+=1)se[we].l(Ye);Ye.forEach(p),k=N(He),I=E(He,"DIV",{class:!0});var et=M(I);W(P.$$.fragment,et),et.forEach(p),He.forEach(p),je.forEach(p),Fe.forEach(p),j=N(Y),ae&&ae.l(Y),Q=N(Y),L=E(Y,"DIV",{class:!0});var Oe=M(L);X=E(Oe,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(X)!=="svelte-f9tb7f"&&(X.textContent=he),be=N(Oe),de=E(Oe,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(de)!=="svelte-qxrsl0"&&(de.textContent=De),Oe.forEach(p),Y.forEach(p),this.h()},h(){f(t,"class","text-lg font-semibold text-gray-900"),f(r,"class","text-gray-400 hover:text-gray-600 transition-colors"),f(s,"class","flex items-center justify-between mb-6"),f(m,"class","block text-sm font-medium text-gray-700 mb-3"),f(y,"class","w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-tap2-blue focus:border-tap2-blue transition-all duration-200 appearance-none cursor-pointer hover:border-gray-300"),n[0]===void 0&&st(()=>n[12].call(y)),f(R,"class","absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"),f(v,"class","relative"),f(b,"class","block text-sm font-medium text-gray-700 mb-3"),f(c,"class","w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-tap2-blue focus:border-tap2-blue transition-all duration-200 appearance-none cursor-pointer hover:border-gray-300"),n[1]===void 0&&st(()=>n[13].call(c)),f(I,"class","absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"),f(S,"class","relative"),f(g,"class","grid grid-cols-1 md:grid-cols-2 gap-6"),f(X,"class","px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors"),f(de,"class","px-4 py-2 bg-tap2-blue text-white rounded-lg hover:bg-blue-700 transition-colors"),f(L,"class","flex items-center justify-end space-x-3 mt-6 pt-6 border-t border-gray-200"),f(e,"class","bg-white rounded-xl shadow-lg border border-gray-200 p-6 mb-8")},m(H,Y){U(H,e,Y),i(e,s),i(s,t),i(s,a),i(s,r),J(o,r,null),i(e,d),i(e,g),i(g,u),i(u,m),i(u,w),i(u,v),i(v,y);for(let O=0;O<le.length;O+=1)le[O]&&le[O].m(y,null);Ue(y,n[0],!0),i(v,_),i(v,R),i(g,h),i(g,$),i($,b),i($,V),i($,S),i(S,c);for(let O=0;O<se.length;O+=1)se[O]&&se[O].m(c,null);Ue(c,n[1],!0),i(S,k),i(S,I),J(P,I,null),i(e,j),ae&&ae.m(e,null),i(e,Q),i(e,L),i(L,X),i(L,be),i(L,de),ge=!0,me||(Qe=[ce(r,"click",n[7]),ce(y,"change",n[12]),ce(c,"change",n[13]),ce(c,"change",n[8]),ce(X,"click",n[10]),ce(de,"click",n[9])],me=!0)},p(H,[Y]){if(Y&32){xe=ne(H[5]);let O;for(O=0;O<xe.length;O+=1){const _e=Et(H,xe,O);le[O]?le[O].p(_e,Y):(le[O]=Dt(_e),le[O].c(),le[O].m(y,null))}for(;O<le.length;O+=1)le[O].d(1);le.length=xe.length}if(Y&33&&Ue(y,H[0]),Y&64){$e=ne(H[6]);let O;for(O=0;O<$e.length;O+=1){const _e=wt(H,$e,O);se[O]?se[O].p(_e,Y):(se[O]=xt(_e),se[O].c(),se[O].m(c,null))}for(;O<se.length;O+=1)se[O].d(1);se.length=$e.length}Y&66&&Ue(c,H[1]),H[2]?ae?ae.p(H,Y):(ae=$t(H),ae.c(),ae.m(e,Q)):ae&&(ae.d(1),ae=null)},i(H){ge||(F(o.$$.fragment,H),F(P.$$.fragment,H),ge=!0)},o(H){B(o.$$.fragment,H),B(P.$$.fragment,H),ge=!1},d(H){H&&p(e),z(o),ye(le,H),ye(se,H),z(P),ae&&ae.d(),me=!1,Ge(Qe)}}}function Rl(n,e,s){let t,{selectedBusiness:l="all"}=e,{dateRange:a="30d"}=e,{loyaltyCards:r=[]}=e;const o=Mt(),d=[{value:"7d",label:"Last 7 days"},{value:"30d",label:"Last 30 days"},{value:"90d",label:"Last 90 days"},{value:"1y",label:"Last year"},{value:"custom",label:"Custom range"}];let g=!1,u="",m="";function x(){o("close")}function w(){a==="custom"?s(2,g=!0):s(2,g=!1)}function v(){x()}function y(){s(0,l="all"),s(1,a="30d"),s(2,g=!1),s(3,u=""),s(4,m="")}function _(){l=at(this),s(0,l),s(5,t),s(11,r)}function R(){a=at(this),s(1,a),s(6,d)}function C(){u=this.value,s(3,u)}function h(){m=this.value,s(4,m)}return n.$$set=$=>{"selectedBusiness"in $&&s(0,l=$.selectedBusiness),"dateRange"in $&&s(1,a=$.dateRange),"loyaltyCards"in $&&s(11,r=$.loyaltyCards)},n.$$.update=()=>{n.$$.dirty&2048&&s(5,t=[{value:"all",label:"All Businesses"},...r.map($=>({value:$.businessName,label:$.businessName}))])},[l,a,g,u,m,t,d,x,w,v,y,r,_,R,C,h]}class Vl extends re{constructor(e){super(),oe(this,e,Rl,Il,ie,{selectedBusiness:0,dateRange:1,loyaltyCards:11})}}function Ct(n){let e,s,t,l;function a(d){n[14](d)}function r(d){n[15](d)}let o={loyaltyCards:n[0]};return n[2]!==void 0&&(o.selectedBusiness=n[2]),n[4]!==void 0&&(o.dateRange=n[4]),e=new Vl({props:o}),Je.push(()=>qe(e,"selectedBusiness",a)),Je.push(()=>qe(e,"dateRange",r)),e.$on("close",n[16]),{c(){q(e.$$.fragment)},l(d){W(e.$$.fragment,d)},m(d,g){J(e,d,g),l=!0},p(d,g){const u={};g&1&&(u.loyaltyCards=d[0]),!s&&g&4&&(s=!0,u.selectedBusiness=d[2],We(()=>s=!1)),!t&&g&16&&(t=!0,u.dateRange=d[4],We(()=>t=!1)),e.$set(u)},i(d){l||(F(e.$$.fragment,d),l=!0)},o(d){B(e.$$.fragment,d),l=!1},d(d){z(e,d)}}}function Nl(n){let e,s,t,l,a,r;return e=new cl({props:{filteredData:n[8]}}),t=new _l({props:{chartData:n[9]}}),a=new El({props:{recentActivity:n[7],insights:n[3]}}),{c(){q(e.$$.fragment),s=A(),q(t.$$.fragment),l=A(),q(a.$$.fragment)},l(o){W(e.$$.fragment,o),s=N(o),W(t.$$.fragment,o),l=N(o),W(a.$$.fragment,o)},m(o,d){J(e,o,d),U(o,s,d),J(t,o,d),U(o,l,d),J(a,o,d),r=!0},p(o,d){const g={};d&256&&(g.filteredData=o[8]),e.$set(g);const u={};d&512&&(u.chartData=o[9]),t.$set(u);const m={};d&128&&(m.recentActivity=o[7]),d&8&&(m.insights=o[3]),a.$set(m)},i(o){r||(F(e.$$.fragment,o),F(t.$$.fragment,o),F(a.$$.fragment,o),r=!0)},o(o){B(e.$$.fragment,o),B(t.$$.fragment,o),B(a.$$.fragment,o),r=!1},d(o){o&&(p(s),p(l)),z(e,o),z(t,o),z(a,o)}}}function Al(n){let e,s,t,l,a,r="No Data Available",o,d,g="Create some loyalty programs to see analytics data.",u,m,x,w,v;return t=new Ze({props:{class:"w-12 h-12 text-gray-400"}}),x=new Tt({props:{class:"w-4 h-4 mr-2"}}),{c(){e=D("div"),s=D("div"),q(t.$$.fragment),l=A(),a=D("h3"),a.textContent=r,o=A(),d=D("p"),d.textContent=g,u=A(),m=D("a"),q(x.$$.fragment),w=K(`
        Create Program`),this.h()},l(y){e=E(y,"DIV",{class:!0});var _=M(e);s=E(_,"DIV",{class:!0});var R=M(s);W(t.$$.fragment,R),R.forEach(p),l=N(_),a=E(_,"H3",{class:!0,"data-svelte-h":!0}),Z(a)!=="svelte-4de1ft"&&(a.textContent=r),o=N(_),d=E(_,"P",{class:!0,"data-svelte-h":!0}),Z(d)!=="svelte-1p13lkw"&&(d.textContent=g),u=N(_),m=E(_,"A",{href:!0,class:!0});var C=M(m);W(x.$$.fragment,C),w=G(C,`
        Create Program`),C.forEach(p),_.forEach(p),this.h()},h(){f(s,"class","w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6"),f(a,"class","text-xl font-semibold text-gray-900 mb-2"),f(d,"class","text-gray-600 mb-6"),f(m,"href","/create"),f(m,"class","inline-flex items-center px-4 py-2 bg-tap2-blue text-white rounded-lg hover:bg-blue-700 transition-colors"),f(e,"class","text-center py-12")},m(y,_){U(y,e,_),i(e,s),J(t,s,null),i(e,l),i(e,a),i(e,o),i(e,d),i(e,u),i(e,m),J(x,m,null),i(m,w),v=!0},p:fe,i(y){v||(F(t.$$.fragment,y),F(x.$$.fragment,y),v=!0)},o(y){B(t.$$.fragment,y),B(x.$$.fragment,y),v=!1},d(y){y&&p(e),z(t),z(x)}}}function Tl(n){let e,s='<div class="text-center"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-tap2-blue mx-auto mb-4"></div> <p class="text-gray-600">Loading analytics data...</p></div>';return{c(){e=D("div"),e.innerHTML=s,this.h()},l(t){e=E(t,"DIV",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-19g8uhg"&&(e.innerHTML=s),this.h()},h(){f(e,"class","flex items-center justify-center py-12")},m(t,l){U(t,e,l)},p:fe,i:fe,o:fe,d(t){t&&p(e)}}}function Ll(n){let e,s,t,l,a,r,o,d='<h1 class="text-3xl font-bold text-gray-900 mb-2">Analytics Dashboard</h1> <p class="text-gray-600">Detailed insights into your loyalty programs&#39; performance</p>',g,u,m,x,w,v,y,_,R;t=new Nt({});function C(c){n[12](c)}function h(c){n[13](c)}let $={loyaltyCards:n[0],filteredData:n[8]};n[6]!==void 0&&($.showExportModal=n[6]),n[5]!==void 0&&($.showFilters=n[5]),u=new kl({props:$}),Je.push(()=>qe(u,"showExportModal",C)),Je.push(()=>qe(u,"showFilters",h));let b=n[5]&&Ct(n);const T=[Tl,Al,Nl],V=[];function S(c,k){return c[1]?0:c[0].length===0?1:2}return y=S(n),_=V[y]=T[y](n),{c(){e=D("meta"),s=A(),q(t.$$.fragment),l=A(),a=D("main"),r=D("div"),o=D("div"),o.innerHTML=d,g=A(),q(u.$$.fragment),w=A(),b&&b.c(),v=A(),_.c(),this.h()},l(c){const k=Rt("svelte-uzj7xy",document.head);e=E(k,"META",{name:!0,content:!0}),k.forEach(p),s=N(c),W(t.$$.fragment,c),l=N(c),a=E(c,"MAIN",{class:!0});var I=M(a);r=E(I,"DIV",{class:!0});var P=M(r);o=E(P,"DIV",{"data-svelte-h":!0}),Z(o)!=="svelte-1wb6v51"&&(o.innerHTML=d),g=N(P),W(u.$$.fragment,P),P.forEach(p),w=N(I),b&&b.l(I),v=N(I),_.l(I),I.forEach(p),this.h()},h(){document.title="Analytics Dashboard - Tap2 Loyalty",f(e,"name","description"),f(e,"content","Comprehensive analytics for your loyalty programs"),f(r,"class","flex flex-col sm:flex-row items-start sm:items-center justify-between mb-8"),f(a,"class","max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8")},m(c,k){i(document.head,e),U(c,s,k),J(t,c,k),U(c,l,k),U(c,a,k),i(a,r),i(r,o),i(r,g),J(u,r,null),i(a,w),b&&b.m(a,null),i(a,v),V[y].m(a,null),R=!0},p(c,[k]){const I={};k&1&&(I.loyaltyCards=c[0]),k&256&&(I.filteredData=c[8]),!m&&k&64&&(m=!0,I.showExportModal=c[6],We(()=>m=!1)),!x&&k&32&&(x=!0,I.showFilters=c[5],We(()=>x=!1)),u.$set(I),c[5]?b?(b.p(c,k),k&32&&F(b,1)):(b=Ct(c),b.c(),F(b,1),b.m(a,v)):b&&(Le(),B(b,1,1,()=>{b=null}),Pe());let P=y;y=S(c),y===P?V[y].p(c,k):(Le(),B(V[P],1,1,()=>{V[P]=null}),Pe(),_=V[y],_?_.p(c,k):(_=V[y]=T[y](c),_.c()),F(_,1),_.m(a,null))},i(c){R||(F(t.$$.fragment,c),F(u.$$.fragment,c),F(b),F(_),R=!0)},o(c){B(t.$$.fragment,c),B(u.$$.fragment,c),B(b),B(_),R=!1},d(c){c&&(p(s),p(l),p(a)),p(e),z(t,c),z(u),b&&b.d(),V[y].d()}}}function Pl(n){const s=Date.now()-n;return s<6e4?"Just now":s<36e5?`${Math.floor(s/6e4)} minutes ago`:s<864e5?`${Math.floor(s/36e5)} hours ago`:s<6048e5?`${Math.floor(s/864e5)} days ago`:"Over a week ago"}function Fl(n,e,s){let t,l,a,r,o=[],d=[],g=[],u=!0;Vt(async()=>{try{const[c,k,I]=await Promise.all([Ae.query(Te.loyaltyCards.list),Ae.query(Te.activities.list,{businessName:m==="all"?void 0:m}),Ae.query(Te.insights.list,{businessName:m==="all"?void 0:m})]);s(0,o=c||[]),s(10,d=k||[]),s(3,g=I||[]),s(1,u=!1)}catch(c){console.error("Error loading analytics data:",c),s(0,o=[]),s(10,d=[]),s(3,g=[]),s(1,u=!1)}});let m="all",x="30d",w=!1,v=!1;async function y(){try{const[c,k]=await Promise.all([Ae.query(Te.activities.list,{businessName:m==="all"?void 0:m}),Ae.query(Te.insights.list,{businessName:m==="all"?void 0:m})]);s(10,d=c||[]),s(3,g=k||[])}catch(c){console.error("Error loading filtered data:",c)}}function _(){let c={...t};if(!t||Object.keys(t).length===0)return{totalPrograms:0,totalActiveCards:0,totalRedemptions:0,avgEngagement:0,topPerformingBusiness:"N/A",lowestPerformingBusiness:"N/A",mostRedeemedReward:"N/A",lastUpdated:new Date().toLocaleDateString()};if(m!=="all"&&o){const k=o.find(I=>I.businessName===m);k&&(c.totalActiveCards=k.activeCards,c.totalRedemptions=k.redemptions,c.avgEngagement=Math.round((k.redemptions||0)/(k.activeCards||1)*100)||0,c.totalPrograms=1,c.topPerformingBusiness=k.businessName)}return c}function R(){if(m==="all"||!o)return[];const c=o.find(P=>P.businessName===m);if(!c)return[];const k=c.activeCards,I=c.redemptions;return[{month:"Jan",cards:Math.floor(k*.1),redemptions:Math.floor(I*.05)},{month:"Feb",cards:Math.floor(k*.2),redemptions:Math.floor(I*.1)},{month:"Mar",cards:Math.floor(k*.3),redemptions:Math.floor(I*.15)},{month:"Apr",cards:Math.floor(k*.4),redemptions:Math.floor(I*.2)},{month:"May",cards:Math.floor(k*.5),redemptions:Math.floor(I*.25)},{month:"Jun",cards:Math.floor(k*.6),redemptions:Math.floor(I*.3)},{month:"Jul",cards:Math.floor(k*.7),redemptions:Math.floor(I*.35)},{month:"Aug",cards:Math.floor(k*.8),redemptions:Math.floor(I*.4)},{month:"Sep",cards:Math.floor(k*.85),redemptions:Math.floor(I*.5)},{month:"Oct",cards:Math.floor(k*.9),redemptions:Math.floor(I*.6)},{month:"Nov",cards:Math.floor(k*.95),redemptions:Math.floor(I*.8)},{month:"Dec",cards:k,redemptions:I}]}function C(){if(m==="all"||!o)return[];const c=o.find(I=>I.businessName===m);if(!c)return[];const k=c.redemptions;return[{day:"Mon",redemptions:Math.floor(k*.1)},{day:"Tue",redemptions:Math.floor(k*.15)},{day:"Wed",redemptions:Math.floor(k*.2)},{day:"Thu",redemptions:Math.floor(k*.25)},{day:"Fri",redemptions:Math.floor(k*.3)},{day:"Sat",redemptions:Math.floor(k*.2)},{day:"Sun",redemptions:Math.floor(k*.1)}]}function h(){if(!d||d.length===0)return[{type:"info",message:"No recent activity",time:"N/A",business:"N/A"}];const k=Date.now()-24*60*60*1e3,I=d.filter(P=>P.timestamp>=k);return I.length===0?[{type:"info",message:"No activity in the past 24 hours",time:"N/A",business:"N/A"}]:I.sort((P,j)=>j.timestamp-P.timestamp).map(P=>({type:P.type,message:P.message,time:Pl(P.timestamp),business:P.businessName}))}function $(c){v=c,s(6,v)}function b(c){w=c,s(5,w)}function T(c){m=c,s(2,m)}function V(c){x=c,s(4,x)}const S=()=>s(5,w=!1);return n.$$.update=()=>{n.$$.dirty&1&&s(11,t=o&&o.length>0?{totalPrograms:o.length,totalActiveCards:o.reduce((c,k)=>c+(k.activeCards||0),0),totalRedemptions:o.reduce((c,k)=>c+(k.redemptions||0),0),avgEngagement:o.length>0?Math.round(o.reduce((c,k)=>c+(k.redemptions||0)/(k.activeCards||1),0)/o.length*100):0,topPerformingBusiness:o.length>0?o.reduce((c,k)=>(k.redemptions||0)/(k.activeCards||1)>(c.redemptions||0)/(c.activeCards||1)?k:c).businessName:"N/A",lowestPerformingBusiness:o.length>0?o.reduce((c,k)=>(k.redemptions||0)/(c.activeCards||1)<(c.redemptions||0)/(c.activeCards||1)?k:c).businessName:"N/A",mostRedeemedReward:"Free Coffee",lastUpdated:new Date().toLocaleDateString()}:{totalPrograms:0,totalActiveCards:0,totalRedemptions:0,avgEngagement:0,topPerformingBusiness:"N/A",lowestPerformingBusiness:"N/A",mostRedeemedReward:"N/A",lastUpdated:new Date().toLocaleDateString()}),n.$$.dirty&2053&&s(9,l=o&&o.length>0?{monthlyGrowth:m==="all"?[{month:"Jan",cards:Math.floor(o.length*.1),redemptions:Math.floor(t.totalRedemptions*.05)},{month:"Feb",cards:Math.floor(o.length*.2),redemptions:Math.floor(t.totalRedemptions*.1)},{month:"Mar",cards:Math.floor(o.length*.3),redemptions:Math.floor(t.totalRedemptions*.15)},{month:"Apr",cards:Math.floor(o.length*.4),redemptions:Math.floor(t.totalRedemptions*.2)},{month:"May",cards:Math.floor(o.length*.5),redemptions:Math.floor(t.totalRedemptions*.25)},{month:"Jun",cards:Math.floor(o.length*.6),redemptions:Math.floor(t.totalRedemptions*.3)},{month:"Jul",cards:Math.floor(o.length*.7),redemptions:Math.floor(t.totalRedemptions*.35)},{month:"Aug",cards:Math.floor(o.length*.8),redemptions:Math.floor(t.totalRedemptions*.4)},{month:"Sep",cards:Math.floor(o.length*.85),redemptions:Math.floor(t.totalRedemptions*.5)},{month:"Oct",cards:Math.floor(o.length*.9),redemptions:Math.floor(t.totalRedemptions*.6)},{month:"Nov",cards:Math.floor(o.length*.95),redemptions:Math.floor(t.totalRedemptions*.8)},{month:"Dec",cards:o.length,redemptions:t.totalRedemptions}]:R(),businessPerformance:o.map(c=>({business:c.businessName,cards:c.activeCards,redemptions:c.redemptions,engagement:Math.round((c.redemptions||0)/(c.activeCards||1)*100)||0})),weeklyRedemptions:m==="all"?[{day:"Mon",redemptions:Math.floor(t.totalRedemptions*.1)},{day:"Tue",redemptions:Math.floor(t.totalRedemptions*.15)},{day:"Wed",redemptions:Math.floor(t.totalRedemptions*.2)},{day:"Thu",redemptions:Math.floor(t.totalRedemptions*.25)},{day:"Fri",redemptions:Math.floor(t.totalRedemptions*.3)},{day:"Sat",redemptions:Math.floor(t.totalRedemptions*.2)},{day:"Sun",redemptions:Math.floor(t.totalRedemptions*.1)}]:C()}:{monthlyGrowth:[{month:"Jan",cards:0,redemptions:0},{month:"Feb",cards:0,redemptions:0},{month:"Mar",cards:0,redemptions:0},{month:"Apr",cards:0,redemptions:0},{month:"May",cards:0,redemptions:0},{month:"Jun",cards:0,redemptions:0},{month:"Jul",cards:0,redemptions:0},{month:"Aug",cards:0,redemptions:0},{month:"Sep",cards:0,redemptions:0},{month:"Oct",cards:0,redemptions:0},{month:"Nov",cards:0,redemptions:0},{month:"Dec",cards:0,redemptions:0}],businessPerformance:[],weeklyRedemptions:[{day:"Mon",redemptions:0},{day:"Tue",redemptions:0},{day:"Wed",redemptions:0},{day:"Thu",redemptions:0},{day:"Fri",redemptions:0},{day:"Sat",redemptions:0},{day:"Sun",redemptions:0}]}),n.$$.dirty&2052&&s(8,a=m==="all"?t:_()),n.$$.dirty&1026&&s(7,r=!u&&d?h():[]),n.$$.dirty&4&&m!==void 0&&y()},[o,u,m,g,x,w,v,r,a,l,d,t,$,b,T,V,S]}class Jl extends re{constructor(e){super(),oe(this,e,Fl,Ll,ie,{})}}export{Jl as component};

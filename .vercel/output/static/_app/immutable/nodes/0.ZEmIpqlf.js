var K=Object.defineProperty;var Q=(r,t,i)=>t in r?K(r,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[t]=i;var D=(r,t,i)=>Q(r,typeof t!="symbol"?t+"":t,i);import{S as q,i as U,s as Z,n as H,d as m,b as M,h as x,V as O,k,y as F,a0 as R,J as G,c as u,M as V,q as h,B as J,e as p,f as b,A as y,j as w,F as X,m as Y,o as $,p as z,G as tt,H as et,I as it,u as st,w as nt,x as ot}from"../chunks/BXmqPpqk.js";import"../chunks/IHki7fMi.js";function lt(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(r=>{}).catch(r=>{})})}const E=class E{constructor(){D(this,"installPrompt",null);D(this,"isInstalled",!1);D(this,"canInstall",!1);D(this,"notificationShown",!1);D(this,"notificationDismissed",!1);this.initialize()}static getInstance(){return E.instance||(E.instance=new E),E.instance}initialize(){typeof window>"u"||typeof localStorage>"u"||(this.notificationDismissed=localStorage.getItem("pwa-notification-dismissed")==="true",this.isInstalled=this.checkIfInstalled(),!this.isInstalled&&(window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),this.installPrompt=t,this.canInstall=!0,this.notificationDismissed||setTimeout(()=>{this.showNotification()},3e3)}),window.addEventListener("appinstalled",()=>{this.isInstalled=!0,this.canInstall=!1,this.installPrompt=null,this.notificationShown=!1,this.hideNotification()}),this.checkIOSInstallability()))}checkIfInstalled(){return typeof window>"u"?!1:window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0||document.referrer.includes("android-app://")}checkIOSInstallability(){if(typeof window>"u"||typeof navigator>"u")return;const t=/iPad|iPhone|iPod/.test(navigator.userAgent),i=window.navigator.standalone===!0;t&&!i&&!this.notificationDismissed&&setTimeout(()=>{this.showIOSInstructions()},5e3)}showNotification(){this.notificationShown=!0,typeof window<"u"&&window.dispatchEvent(new CustomEvent("pwa-notification-show"))}hideNotification(){this.notificationShown=!1,typeof window<"u"&&window.dispatchEvent(new CustomEvent("pwa-notification-hide"))}showIOSInstructions(){typeof window<"u"&&window.dispatchEvent(new CustomEvent("pwa-ios-instructions-show"))}async installPWA(){if(this.installPrompt){this.installPrompt.prompt();const{outcome:t}=await this.installPrompt.userChoice;return t==="accepted"?(this.canInstall=!1,this.installPrompt=null,this.notificationShown=!1,!0):!1}else return!1}dismissNotification(){this.notificationShown=!1,this.notificationDismissed=!0,typeof localStorage<"u"&&localStorage.setItem("pwa-notification-dismissed","true"),this.hideNotification()}resetNotification(){typeof localStorage<"u"&&localStorage.removeItem("pwa-notification-dismissed"),this.notificationDismissed=!1}get canShowNotification(){return!this.isInstalled&&this.canInstall&&!this.notificationDismissed}get shouldShowNotification(){return this.notificationShown&&this.canShowNotification}get isPWAInstalled(){return this.isInstalled}get canInstallPWA(){return this.canInstall}};D(E,"instance");let P=E;const N=P.getInstance();function A(r){let t,i,n,a,d='<div class="flex-shrink-0"><img src="/logo/Logo-tap.png" alt="Tap2" class="h-10 w-10 rounded-lg bg-white/20 p-1"/></div> <div class="flex-1 min-w-0"><h3 class="text-lg font-semibold text-white leading-tight">Install Tap2</h3></div>',l,e,o,s='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span>Install</span>',c,f,_='<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',g,I;return{c(){t=w("div"),i=w("div"),n=w("div"),a=w("div"),a.innerHTML=d,l=k(),e=w("div"),o=w("button"),o.innerHTML=s,c=k(),f=w("button"),f.innerHTML=_,this.h()},l(v){t=p(v,"DIV",{class:!0,style:!0});var T=b(t);i=p(T,"DIV",{class:!0});var C=b(i);n=p(C,"DIV",{class:!0});var L=b(n);a=p(L,"DIV",{class:!0,"data-svelte-h":!0}),y(a)!=="svelte-9dc87"&&(a.innerHTML=d),l=x(L),e=p(L,"DIV",{class:!0});var S=b(e);o=p(S,"BUTTON",{class:!0,"data-svelte-h":!0}),y(o)!=="svelte-wysxad"&&(o.innerHTML=s),c=x(S),f=p(S,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),y(f)!=="svelte-htf4zo"&&(f.innerHTML=_),S.forEach(m),L.forEach(m),C.forEach(m),T.forEach(m),this.h()},h(){h(a,"class","flex items-center space-x-3"),h(o,"class","bg-white text-blue-600 px-4 py-2 rounded-lg font-medium hover:bg-gray-100 transition-colors shadow-sm flex items-center space-x-2"),h(f,"class","text-white/80 hover:text-white transition-colors p-1 rounded"),h(f,"aria-label","Dismiss notification"),h(e,"class","flex items-center space-x-2 ml-4"),h(n,"class","flex items-center justify-between"),h(i,"class","max-w-7xl mx-auto px-4 py-3"),h(t,"class","fixed top-0 left-0 right-0 bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-lg z-50 animate-slide-down svelte-wq9gup"),J(t,"transform","translateZ(0)")},m(v,T){M(v,t,T),u(t,i),u(i,n),u(n,a),u(n,l),u(n,e),u(e,o),u(e,c),u(e,f),g||(I=[V(o,"click",r[4]),V(f,"click",r[5])],g=!0)},p:H,d(v){v&&m(t),g=!1,G(I)}}}function B(r){let t,i,n,a,d='<div class="flex-shrink-0"><img src="/logo/Logo-tap.png" alt="Tap2" class="h-10 w-10 rounded-lg bg-white/20 p-1"/></div> <div class="flex-1 min-w-0"><h3 class="text-lg font-semibold text-white leading-tight">Install Tap2</h3></div>',l,e,o,s='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <span>Download</span>',c,f,_='<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>',g,I;return{c(){t=w("div"),i=w("div"),n=w("div"),a=w("div"),a.innerHTML=d,l=k(),e=w("div"),o=w("button"),o.innerHTML=s,c=k(),f=w("button"),f.innerHTML=_,this.h()},l(v){t=p(v,"DIV",{class:!0,style:!0});var T=b(t);i=p(T,"DIV",{class:!0});var C=b(i);n=p(C,"DIV",{class:!0});var L=b(n);a=p(L,"DIV",{class:!0,"data-svelte-h":!0}),y(a)!=="svelte-9dc87"&&(a.innerHTML=d),l=x(L),e=p(L,"DIV",{class:!0});var S=b(e);o=p(S,"BUTTON",{class:!0,"data-svelte-h":!0}),y(o)!=="svelte-18lwzss"&&(o.innerHTML=s),c=x(S),f=p(S,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),y(f)!=="svelte-3qvl4p"&&(f.innerHTML=_),S.forEach(m),L.forEach(m),C.forEach(m),T.forEach(m),this.h()},h(){h(a,"class","flex items-center space-x-3"),h(o,"class","bg-white text-blue-600 px-4 py-2 rounded-lg font-medium hover:bg-gray-100 transition-colors shadow-sm flex items-center space-x-2"),h(f,"class","text-white/80 hover:text-white transition-colors p-1 rounded"),h(f,"aria-label","Dismiss instructions"),h(e,"class","flex items-center space-x-2 ml-4"),h(n,"class","flex items-center justify-between"),h(i,"class","max-w-7xl mx-auto px-4 py-3"),h(t,"class","fixed top-0 left-0 right-0 bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-lg z-50 animate-slide-down svelte-wq9gup"),J(t,"transform","translateZ(0)")},m(v,T){M(v,t,T),u(t,i),u(i,n),u(n,a),u(n,l),u(n,e),u(e,o),u(e,c),u(e,f),g||(I=[V(o,"click",r[4]),V(f,"click",r[6])],g=!0)},p:H,d(v){v&&m(t),g=!1,G(I)}}}function W(r){let t,i,n,a='<img src="/logo/Logo-tap.png" alt="Tap2" class="h-8 w-8 rounded-lg bg-white/20 p-1"/>',d,l,e='<h3 class="text-sm font-semibold text-white">Install Tap2</h3>',o,s,c="Install",f,_;return{c(){t=w("div"),i=w("div"),n=w("div"),n.innerHTML=a,d=k(),l=w("div"),l.innerHTML=e,o=k(),s=w("button"),s.textContent=c,this.h()},l(g){t=p(g,"DIV",{class:!0});var I=b(t);i=p(I,"DIV",{class:!0});var v=b(i);n=p(v,"DIV",{class:!0,"data-svelte-h":!0}),y(n)!=="svelte-1cs328x"&&(n.innerHTML=a),d=x(v),l=p(v,"DIV",{class:!0,"data-svelte-h":!0}),y(l)!=="svelte-4jfgmp"&&(l.innerHTML=e),o=x(v),s=p(v,"BUTTON",{class:!0,"data-svelte-h":!0}),y(s)!=="svelte-1iwdode"&&(s.textContent=c),v.forEach(m),I.forEach(m),this.h()},h(){h(n,"class","flex-shrink-0"),h(l,"class","flex-1 min-w-0"),h(s,"class","bg-white text-blue-600 px-3 py-2 rounded-lg text-xs font-semibold hover:bg-gray-100 transition-colors shadow-sm"),h(i,"class","flex items-center space-x-3"),h(t,"class","fixed bottom-4 right-4 bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4 rounded-lg shadow-lg z-50 max-w-sm")},m(g,I){M(g,t,I),u(t,i),u(i,n),u(i,d),u(i,l),u(i,o),u(i,s),f||(_=V(s,"click",r[4]),f=!0)},p:H,d(g){g&&m(t),f=!1,_()}}}function j(r){let t,i='<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> <span class="font-semibold">PWA Installed Successfully!</span>';return{c(){t=w("div"),t.innerHTML=i,this.h()},l(n){t=p(n,"DIV",{class:!0,"data-svelte-h":!0}),y(t)!=="svelte-15pj0nd"&&(t.innerHTML=i),this.h()},h(){h(t,"class","fixed top-4 right-4 bg-gradient-to-r from-green-500 to-green-600 text-white px-4 py-2 rounded-lg shadow-lg z-50 text-sm flex items-center space-x-2")},m(n,a){M(n,t,a)},d(n){n&&m(t)}}}function at(r){let t,i,n,a,d=!r[2]&&r[3]&&r[0]&&A(r),l=r[1]&&B(r),e=!r[2]&&r[3]&&!r[0]&&!r[1]&&W(r),o=r[2]&&j();return{c(){d&&d.c(),t=k(),l&&l.c(),i=k(),e&&e.c(),n=k(),o&&o.c(),a=O()},l(s){d&&d.l(s),t=x(s),l&&l.l(s),i=x(s),e&&e.l(s),n=x(s),o&&o.l(s),a=O()},m(s,c){d&&d.m(s,c),M(s,t,c),l&&l.m(s,c),M(s,i,c),e&&e.m(s,c),M(s,n,c),o&&o.m(s,c),M(s,a,c)},p(s,[c]){!s[2]&&s[3]&&s[0]?d?d.p(s,c):(d=A(s),d.c(),d.m(t.parentNode,t)):d&&(d.d(1),d=null),s[1]?l?l.p(s,c):(l=B(s),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null),!s[2]&&s[3]&&!s[0]&&!s[1]?e?e.p(s,c):(e=W(s),e.c(),e.m(n.parentNode,n)):e&&(e.d(1),e=null),s[2]?o||(o=j(),o.c(),o.m(a.parentNode,a)):o&&(o.d(1),o=null)},i:H,o:H,d(s){s&&(m(t),m(i),m(n),m(a)),d&&d.d(s),l&&l.d(s),e&&e.d(s),o&&o.d(s)}}}function rt(r,t,i){let n=!1,a=!1,d=!1,l=!1;F(()=>{if(typeof window>"u")return;e(),window.addEventListener("pwa-notification-show",o),window.addEventListener("pwa-notification-hide",s),window.addEventListener("pwa-ios-instructions-show",c);const I=setInterval(e,1e3);return()=>{clearInterval(I)}}),R(()=>{typeof window>"u"||(window.removeEventListener("pwa-notification-show",o),window.removeEventListener("pwa-notification-hide",s),window.removeEventListener("pwa-ios-instructions-show",c))});function e(){typeof window>"u"||(i(2,d=N.isPWAInstalled),i(3,l=N.canInstallPWA),i(0,n=N.shouldShowNotification))}function o(){i(0,n=!0)}function s(){i(0,n=!1)}function c(){i(1,a=!0)}async function f(){await N.installPWA()?i(0,n=!1):alert("PWA installation not available. This usually works better on mobile devices or when deployed to a real domain (not localhost).")}function _(){N.dismissNotification(),i(0,n=!1)}function g(){i(1,a=!1),N.dismissNotification()}return[n,a,d,l,f,_,g]}class dt extends q{constructor(t){super(),U(this,t,rt,at,Z,{})}}function ct(r){let t,i,n,a;const d=r[4].default,l=X(d,r,r[3],null);return n=new dt({}),{c(){t=w("main"),l&&l.c(),i=k(),ot(n.$$.fragment),this.h()},l(e){t=p(e,"MAIN",{class:!0});var o=b(t);l&&l.l(o),i=x(o),nt(n.$$.fragment,o),o.forEach(m),this.h()},h(){h(t,"class","min-h-screen bg-white")},m(e,o){M(e,t,o),l&&l.m(t,null),u(t,i),st(n,t,null),a=!0},p(e,[o]){l&&l.p&&(!a||o&8)&&tt(l,d,e,e[3],a?it(d,e[3],o,null):et(e[3]),null)},i(e){a||(z(l,e),z(n.$$.fragment,e),a=!0)},o(e){$(l,e),$(n.$$.fragment,e),a=!1},d(e){e&&m(t),l&&l.d(e),Y(n)}}}function ft(r,t,i){let{$$slots:n={},$$scope:a}=t;const d=void 0,l=void 0,e=async()=>({});return F(()=>{lt()}),r.$$set=o=>{"$$scope"in o&&i(3,a=o.$$scope)},[d,l,e,a,n]}class wt extends q{constructor(t){super(),U(this,t,ft,ct,Z,{params:0,data:1,load:2})}get params(){return this.$$.ctx[0]}get data(){return this.$$.ctx[1]}get load(){return this.$$.ctx[2]}}export{wt as component};

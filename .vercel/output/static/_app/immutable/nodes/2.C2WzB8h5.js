import{S as nt,i as ot,s as it,D as Ge,m as O,o as I,p as k,u as Q,w as Y,x as Z,E as lt,F as At,G as Nt,H as Tt,I as Lt,d as u,$ as Dt,q as i,B as st,a as Le,b as xe,c as r,e as c,f as g,h as p,g as be,A as H,j as d,k as _,t as $e,r as Ht,v as Rt,y as qt,n as ye,z as zt,M as Gt,C as St,V as It}from"../chunks/BXmqPpqk.js";import{H as Ut,e as vt,u as Ft,o as Ot}from"../chunks/utTcGRkv.js";import"../chunks/IHki7fMi.js";import{I as Pt,g as jt,a as Bt}from"../chunks/C5q8vhaC.js";import{C as Qt,U as Yt,P as Zt}from"../chunks/zKMjxR-c.js";import{G as Jt,S as rt}from"../chunks/D2ulg5l1.js";import{c as Kt,a as Wt}from"../chunks/LhW53hAP.js";import{B as Xt}from"../chunks/CgLNA9yR.js";function ea(n){let e;const s=n[2].default,t=At(s,n,n[3],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,a){t&&t.m(l,a),e=!0},p(l,a){t&&t.p&&(!e||a&8)&&Nt(t,s,l,l[3],e?Lt(s,l[3],a,null):Tt(l[3]),null)},i(l){e||(k(t,l),e=!0)},o(l){I(t,l),e=!1},d(l){t&&t.d(l)}}}function ta(n){let e,s;const t=[{name:"map-pin"},n[1],{iconNode:n[0]}];let l={$$slots:{default:[ea]},$$scope:{ctx:n}};for(let a=0;a<t.length;a+=1)l=Ge(l,t[a]);return e=new Pt({props:l}),{c(){Z(e.$$.fragment)},l(a){Y(e.$$.fragment,a)},m(a,o){Q(e,a,o),s=!0},p(a,[o]){const f=o&3?jt(t,[t[0],o&2&&Bt(a[1]),o&1&&{iconNode:a[0]}]):{};o&8&&(f.$$scope={dirty:o,ctx:a}),e.$set(f)},i(a){s||(k(e.$$.fragment,a),s=!0)},o(a){I(e.$$.fragment,a),s=!1},d(a){O(e,a)}}}function aa(n,e,s){let{$$slots:t={},$$scope:l}=e;const a=[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}],["circle",{cx:"12",cy:"10",r:"3"}]];return n.$$set=o=>{s(1,e=Ge(Ge({},e),lt(o))),"$$scope"in o&&s(3,l=o.$$scope)},e=lt(e),[a,e,t,l]}class sa extends nt{constructor(e){super(),ot(this,e,aa,ta,it,{})}}function ra(n){let e;const s=n[2].default,t=At(s,n,n[3],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,a){t&&t.m(l,a),e=!0},p(l,a){t&&t.p&&(!e||a&8)&&Nt(t,s,l,l[3],e?Lt(s,l[3],a,null):Tt(l[3]),null)},i(l){e||(k(t,l),e=!0)},o(l){I(t,l),e=!1},d(l){t&&t.d(l)}}}function la(n){let e,s;const t=[{name:"settings"},n[1],{iconNode:n[0]}];let l={$$slots:{default:[ra]},$$scope:{ctx:n}};for(let a=0;a<t.length;a+=1)l=Ge(l,t[a]);return e=new Pt({props:l}),{c(){Z(e.$$.fragment)},l(a){Y(e.$$.fragment,a)},m(a,o){Q(e,a,o),s=!0},p(a,[o]){const f=o&3?jt(t,[t[0],o&2&&Bt(a[1]),o&1&&{iconNode:a[0]}]):{};o&8&&(f.$$scope={dirty:o,ctx:a}),e.$set(f)},i(a){s||(k(e.$$.fragment,a),s=!0)},o(a){I(e.$$.fragment,a),s=!1},d(a){O(e,a)}}}function na(n,e,s){let{$$slots:t={},$$scope:l}=e;const a=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]];return n.$$set=o=>{s(1,e=Ge(Ge({},e),lt(o))),"$$scope"in o&&s(3,l=o.$$scope)},e=lt(e),[a,e,t,l]}class oa extends nt{constructor(e){super(),ot(this,e,na,la,it,{})}}function ia(n){let e,s,t,l,a,o,f,v,h,B,$,V,b=n[0].businessName+"",M,E,C,R,q,w,y,z,J=n[0].location+"",te,He,ae,N,ee,K,ne,Ce,me,oe,se,T,W,ie,ce,we="Active Cards",Se,he,G=n[0].activeCards+"",de,ue,re,U,ge,Ee,ve,fe="Redemptions",Pe,m,D=n[0].redemptions+"",X,F,S,P,L,ke="Engagement Rate",je,le,Me,Ve,Be,Re,Ae,ct,pe,Ne,pt="Reward after",dt,qe,Ue=n[0].rewardThreshold+"",Fe,ut,Te,_t="visits",ft,De,mt,Oe,j;return w=new sa({props:{class:"w-4 h-4 mr-1"}}),N=new Qt({props:{class:"w-4 h-4 mr-1"}}),W=new Yt({props:{class:"w-4 h-4 text-tap2-blue mr-1"}}),ge=new Jt({props:{class:"w-4 h-4 text-green-600 mr-1"}}),{c(){e=d("div"),s=d("div"),t=d("img"),o=_(),f=d("div"),v=_(),h=d("div"),B=_(),$=d("div"),V=d("h3"),M=$e(b),E=_(),C=d("div"),R=d("div"),q=d("div"),Z(w.$$.fragment),y=_(),z=d("span"),te=$e(J),He=_(),ae=d("div"),Z(N.$$.fragment),ee=_(),K=d("span"),ne=$e("Created "),Ce=$e(n[2]),me=_(),oe=d("div"),se=d("div"),T=d("div"),Z(W.$$.fragment),ie=_(),ce=d("span"),ce.textContent=we,Se=_(),he=d("div"),de=$e(G),ue=_(),re=d("div"),U=d("div"),Z(ge.$$.fragment),Ee=_(),ve=d("span"),ve.textContent=fe,Pe=_(),m=d("div"),X=$e(D),F=_(),S=d("div"),P=d("div"),L=d("span"),L.textContent=ke,je=_(),le=d("span"),Me=$e(n[3]),Ve=$e("%"),Be=_(),Re=d("div"),Ae=d("div"),ct=_(),pe=d("div"),Ne=d("span"),Ne.textContent=pt,dt=_(),qe=d("span"),Fe=$e(Ue),ut=_(),Te=d("span"),Te.textContent=_t,ft=_(),De=d("a"),mt=$e("View Details"),this.h()},l(x){e=c(x,"DIV",{class:!0});var A=g(e);s=c(A,"DIV",{class:!0});var Ie=g(s);t=c(Ie,"IMG",{src:!0,alt:!0,class:!0}),o=p(Ie),f=c(Ie,"DIV",{class:!0}),g(f).forEach(u),v=p(Ie),h=c(Ie,"DIV",{class:!0,style:!0,title:!0}),g(h).forEach(u),B=p(Ie),$=c(Ie,"DIV",{class:!0});var bt=g($);V=c(bt,"H3",{class:!0});var $t=g(V);M=be($t,b),$t.forEach(u),bt.forEach(u),Ie.forEach(u),E=p(A),C=c(A,"DIV",{class:!0});var _e=g(C);R=c(_e,"DIV",{class:!0});var Qe=g(R);q=c(Qe,"DIV",{class:!0});var Ye=g(q);Y(w.$$.fragment,Ye),y=p(Ye),z=c(Ye,"SPAN",{class:!0});var xt=g(z);te=be(xt,J),xt.forEach(u),Ye.forEach(u),He=p(Qe),ae=c(Qe,"DIV",{class:!0});var Ze=g(ae);Y(N.$$.fragment,Ze),ee=p(Ze),K=c(Ze,"SPAN",{class:!0});var ht=g(K);ne=be(ht,"Created "),Ce=be(ht,n[2]),ht.forEach(u),Ze.forEach(u),Qe.forEach(u),me=p(_e),oe=c(_e,"DIV",{class:!0});var Je=g(oe);se=c(Je,"DIV",{class:!0});var Ke=g(se);T=c(Ke,"DIV",{class:!0});var We=g(T);Y(W.$$.fragment,We),ie=p(We),ce=c(We,"SPAN",{class:!0,"data-svelte-h":!0}),H(ce)!=="svelte-23xlwd"&&(ce.textContent=we),We.forEach(u),Se=p(Ke),he=c(Ke,"DIV",{class:!0});var yt=g(he);de=be(yt,G),yt.forEach(u),Ke.forEach(u),ue=p(Je),re=c(Je,"DIV",{class:!0});var Xe=g(re);U=c(Xe,"DIV",{class:!0});var et=g(U);Y(ge.$$.fragment,et),Ee=p(et),ve=c(et,"SPAN",{class:!0,"data-svelte-h":!0}),H(ve)!=="svelte-4hxnza"&&(ve.textContent=fe),et.forEach(u),Pe=p(Xe),m=c(Xe,"DIV",{class:!0});var wt=g(m);X=be(wt,D),wt.forEach(u),Xe.forEach(u),Je.forEach(u),F=p(_e),S=c(_e,"DIV",{class:!0});var tt=g(S);P=c(tt,"DIV",{class:!0});var at=g(P);L=c(at,"SPAN",{class:!0,"data-svelte-h":!0}),H(L)!=="svelte-m45x08"&&(L.textContent=ke),je=p(at),le=c(at,"SPAN",{class:!0});var gt=g(le);Me=be(gt,n[3]),Ve=be(gt,"%"),gt.forEach(u),at.forEach(u),Be=p(tt),Re=c(tt,"DIV",{class:!0});var Ct=g(Re);Ae=c(Ct,"DIV",{class:!0,style:!0}),g(Ae).forEach(u),Ct.forEach(u),tt.forEach(u),ct=p(_e),pe=c(_e,"DIV",{class:!0});var ze=g(pe);Ne=c(ze,"SPAN",{class:!0,"data-svelte-h":!0}),H(Ne)!=="svelte-1q8d00w"&&(Ne.textContent=pt),dt=p(ze),qe=c(ze,"SPAN",{class:!0});var Et=g(qe);Fe=be(Et,Ue),Et.forEach(u),ut=p(ze),Te=c(ze,"SPAN",{class:!0,"data-svelte-h":!0}),H(Te)!=="svelte-1rasbx1"&&(Te.textContent=_t),ze.forEach(u),ft=p(_e),De=c(_e,"A",{href:!0,class:!0});var Vt=g(De);mt=be(Vt,"View Details"),Vt.forEach(u),_e.forEach(u),A.forEach(u),this.h()},h(){Dt(t.src,l=n[1])||i(t,"src",l),i(t,"alt",a=n[0].businessName),i(t,"class","w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"),i(f,"class","absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"),i(h,"class","absolute top-3 right-3 w-4 h-4 rounded-full border-2 border-white shadow-sm"),st(h,"background-color",n[0].color),i(h,"title","Brand color"),i(V,"class","text-lg font-bold drop-shadow-lg"),i($,"class","absolute bottom-3 left-3 text-white"),i(s,"class","relative h-32 overflow-hidden"),i(z,"class","text-sm"),i(q,"class","flex items-center"),i(K,"class","text-sm"),i(ae,"class","flex items-center"),i(R,"class","flex flex-col sm:flex-row sm:items-center text-gray-600 mb-4 space-y-2 sm:space-y-0 sm:space-x-4"),i(ce,"class","text-xs text-gray-600"),i(T,"class","flex items-center justify-center mb-1"),i(he,"class","text-xl font-bold text-gray-900"),i(se,"class","text-center p-3 bg-gray-50 rounded-lg"),i(ve,"class","text-xs text-gray-600"),i(U,"class","flex items-center justify-center mb-1"),i(m,"class","text-xl font-bold text-gray-900"),i(re,"class","text-center p-3 bg-gray-50 rounded-lg"),i(oe,"class","grid grid-cols-2 gap-4 mb-4"),i(L,"class","text-sm font-medium text-gray-700"),i(le,"class","text-sm font-bold text-tap2-blue"),i(P,"class","flex justify-between items-center mb-2"),i(Ae,"class","bg-gradient-to-r from-tap2-blue to-blue-600 h-2 rounded-full transition-all duration-500"),st(Ae,"width",Math.min(n[3],100)+"%"),i(Re,"class","w-full bg-gray-200 rounded-full h-2"),i(S,"class","mb-4"),i(Ne,"class","text-sm text-gray-600"),i(qe,"class","font-semibold text-gray-900"),i(Te,"class","text-sm text-gray-600"),i(pe,"class","text-center py-3 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg mb-4"),i(De,"href",Oe="/card/"+n[0]._id),i(De,"class","block w-full text-center py-3 px-4 bg-gradient-to-r from-tap2-blue to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all duration-200 text-sm font-medium shadow-sm hover:shadow-md"),i(C,"class","p-6"),i(e,"class","card-gradient overflow-hidden hover:shadow-xl transition-all duration-300 cursor-pointer group animate-fade-in-up")},m(x,A){xe(x,e,A),r(e,s),r(s,t),r(s,o),r(s,f),r(s,v),r(s,h),r(s,B),r(s,$),r($,V),r(V,M),r(e,E),r(e,C),r(C,R),r(R,q),Q(w,q,null),r(q,y),r(q,z),r(z,te),r(R,He),r(R,ae),Q(N,ae,null),r(ae,ee),r(ae,K),r(K,ne),r(K,Ce),r(C,me),r(C,oe),r(oe,se),r(se,T),Q(W,T,null),r(T,ie),r(T,ce),r(se,Se),r(se,he),r(he,de),r(oe,ue),r(oe,re),r(re,U),Q(ge,U,null),r(U,Ee),r(U,ve),r(re,Pe),r(re,m),r(m,X),r(C,F),r(C,S),r(S,P),r(P,L),r(P,je),r(P,le),r(le,Me),r(le,Ve),r(S,Be),r(S,Re),r(Re,Ae),r(C,ct),r(C,pe),r(pe,Ne),r(pe,dt),r(pe,qe),r(qe,Fe),r(pe,ut),r(pe,Te),r(C,ft),r(C,De),r(De,mt),j=!0},p(x,[A]){(!j||A&2&&!Dt(t.src,l=x[1]))&&i(t,"src",l),(!j||A&1&&a!==(a=x[0].businessName))&&i(t,"alt",a),(!j||A&1)&&st(h,"background-color",x[0].color),(!j||A&1)&&b!==(b=x[0].businessName+"")&&Le(M,b),(!j||A&1)&&J!==(J=x[0].location+"")&&Le(te,J),(!j||A&4)&&Le(Ce,x[2]),(!j||A&1)&&G!==(G=x[0].activeCards+"")&&Le(de,G),(!j||A&1)&&D!==(D=x[0].redemptions+"")&&Le(X,D),(!j||A&8)&&Le(Me,x[3]),(!j||A&8)&&st(Ae,"width",Math.min(x[3],100)+"%"),(!j||A&1)&&Ue!==(Ue=x[0].rewardThreshold+"")&&Le(Fe,Ue),(!j||A&1&&Oe!==(Oe="/card/"+x[0]._id))&&i(De,"href",Oe)},i(x){j||(k(w.$$.fragment,x),k(N.$$.fragment,x),k(W.$$.fragment,x),k(ge.$$.fragment,x),j=!0)},o(x){I(w.$$.fragment,x),I(N.$$.fragment,x),I(W.$$.fragment,x),I(ge.$$.fragment,x),j=!1},d(x){x&&u(e),O(w),O(N),O(W),O(ge)}}}function ca(n,e,s){let t,l,a,{card:o}=e;return n.$$set=f=>{"card"in f&&s(0,o=f.card)},n.$$.update=()=>{n.$$.dirty&1&&s(3,t=o.activeCards>0?Math.round(o.redemptions/o.activeCards*100):0),n.$$.dirty&1&&s(2,l=new Date(o.createdAt).toLocaleDateString()),n.$$.dirty&1&&s(1,a=(()=>{switch(o.businessName){case"Café Amsterdam":return"https://images.unsplash.com/photo-1554118811-1e0d58224f24?w=400&h=200&fit=crop&crop=center";case"Bistro Rotterdam":return"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=400&h=200&fit=crop&crop=center";case"The Hague Coffee":return"https://images.unsplash.com/photo-1501339847302-ac426a4a7cbb?w=400&h=200&fit=crop&crop=center";default:return"https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=400&h=200&fit=crop&crop=center"}})())},[o,a,l,t]}class da extends nt{constructor(e){super(),ot(this,e,ca,ia,it,{card:0})}}function kt(n,e,s){const t=n.slice();return t[15]=e[s],t}function ua(n,e,s){const t=n.slice();return t[12]=e[s],t}function fa(n){let e,s=[],t=new Map,l,a=vt(n[0]);const o=f=>f[15]._id;for(let f=0;f<a.length;f+=1){let v=kt(n,a,f),h=o(v);t.set(h,s[f]=Mt(h,v))}return{c(){e=d("div");for(let f=0;f<s.length;f+=1)s[f].c();this.h()},l(f){e=c(f,"DIV",{class:!0});var v=g(e);for(let h=0;h<s.length;h+=1)s[h].l(v);v.forEach(u),this.h()},h(){i(e,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6")},m(f,v){xe(f,e,v);for(let h=0;h<s.length;h+=1)s[h]&&s[h].m(e,null);l=!0},p(f,v){v&1&&(a=vt(f[0]),St(),s=Ft(s,v,o,1,f,a,t,e,Ot,Mt,null,kt),Ht())},i(f){if(!l){for(let v=0;v<a.length;v+=1)k(s[v]);l=!0}},o(f){for(let v=0;v<s.length;v+=1)I(s[v]);l=!1},d(f){f&&u(e);for(let v=0;v<s.length;v+=1)s[v].d()}}}function ma(n){let e,s='<div class="w-24 h-24 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center"><span class="text-4xl">💳</span></div> <h3 class="text-lg font-medium text-gray-900 mb-2">No loyalty programs yet</h3> <p class="text-gray-600 mb-6">Create your first digital loyalty card program to get started.</p> <div class="space-x-4"><a href="/create" class="btn-primary">Create Your First Program</a></div>';return{c(){e=d("div"),e.innerHTML=s,this.h()},l(t){e=c(t,"DIV",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-ph5wkk"&&(e.innerHTML=s),this.h()},h(){i(e,"class","text-center py-12")},m(t,l){xe(t,e,l)},p:ye,i:ye,o:ye,d(t){t&&u(e)}}}function ha(n){let e,s,t='<span class="text-4xl">⚠️</span>',l,a,o="Connection Error",f,v,h="Unable to connect to the database. Please check your Convex deployment.",B,$,V,b="Retry Connection",M,E,C="Try Creating a Card",R,q;return{c(){e=d("div"),s=d("div"),s.innerHTML=t,l=_(),a=d("h3"),a.textContent=o,f=_(),v=d("p"),v.textContent=h,B=_(),$=d("div"),V=d("button"),V.textContent=b,M=_(),E=d("a"),E.textContent=C,this.h()},l(w){e=c(w,"DIV",{class:!0});var y=g(e);s=c(y,"DIV",{class:!0,"data-svelte-h":!0}),H(s)!=="svelte-1nis613"&&(s.innerHTML=t),l=p(y),a=c(y,"H3",{class:!0,"data-svelte-h":!0}),H(a)!=="svelte-yo4igs"&&(a.textContent=o),f=p(y),v=c(y,"P",{class:!0,"data-svelte-h":!0}),H(v)!=="svelte-387gcf"&&(v.textContent=h),B=p(y),$=c(y,"DIV",{class:!0});var z=g($);V=c(z,"BUTTON",{class:!0,"data-svelte-h":!0}),H(V)!=="svelte-1gloayb"&&(V.textContent=b),M=p(z),E=c(z,"A",{href:!0,class:!0,"data-svelte-h":!0}),H(E)!=="svelte-zn7yc4"&&(E.textContent=C),z.forEach(u),y.forEach(u),this.h()},h(){i(s,"class","w-24 h-24 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center"),i(a,"class","text-lg font-medium text-gray-900 mb-2"),i(v,"class","text-gray-600 mb-6"),i(V,"class","btn-primary"),i(E,"href","/create"),i(E,"class","px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50"),i($,"class","space-x-4"),i(e,"class","text-center py-12")},m(w,y){xe(w,e,y),r(e,s),r(e,l),r(e,a),r(e,f),r(e,v),r(e,B),r(e,$),r($,V),r($,M),r($,E),R||(q=Gt(V,"click",n[9]),R=!0)},p:ye,i:ye,o:ye,d(w){w&&u(e),R=!1,q()}}}function ga(n){let e,s=vt(Array(3)),t=[];for(let l=0;l<s.length;l+=1)t[l]=va(ua(n,s,l));return{c(){e=d("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=c(l,"DIV",{class:!0});var a=g(e);for(let o=0;o<t.length;o+=1)t[o].l(a);a.forEach(u),this.h()},h(){i(e,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6")},m(l,a){xe(l,e,a);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p:ye,i:ye,o:ye,d(l){l&&u(e),zt(t,l)}}}function Mt(n,e){let s,t,l;return t=new da({props:{card:e[15]}}),{key:n,first:null,c(){s=It(),Z(t.$$.fragment),this.h()},l(a){s=It(),Y(t.$$.fragment,a),this.h()},h(){this.first=s},m(a,o){xe(a,s,o),Q(t,a,o),l=!0},p(a,o){e=a;const f={};o&1&&(f.card=e[15]),t.$set(f)},i(a){l||(k(t.$$.fragment,a),l=!0)},o(a){I(t.$$.fragment,a),l=!1},d(a){a&&u(s),O(t,a)}}}function va(n){let e,s='<div class="h-4 bg-gray-200 rounded mb-4"></div> <div class="h-3 bg-gray-200 rounded mb-2"></div> <div class="h-3 bg-gray-200 rounded mb-4"></div> <div class="grid grid-cols-2 gap-4 mb-4"><div class="h-8 bg-gray-200 rounded"></div> <div class="h-8 bg-gray-200 rounded"></div></div> <div class="h-2 bg-gray-200 rounded mb-2"></div> <div class="h-2 bg-gray-200 rounded"></div> ';return{c(){e=d("div"),e.innerHTML=s,this.h()},l(t){e=c(t,"DIV",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-msdgg5"&&(e.innerHTML=s),this.h()},h(){i(e,"class","card p-6 animate-pulse")},m(t,l){xe(t,e,l)},p:ye,d(t){t&&u(e)}}}function pa(n){let e,s,t,l,a,o,f,v,h,B,$,V,b,M,E,C,R='<h2 class="text-xl font-semibold text-black">Loyalty Programs</h2> <div class="flex space-x-3"><a href="/create" class="btn-primary text-sm w-full sm:w-auto text-center">+ Create New Program</a></div>',q,w,y,z,J,te,He="Quick Actions",ae,N,ee,K,ne,Ce,me,oe='<div class="font-semibold text-gray-900 group-hover:text-tap2-blue transition-colors">Create Program</div> <div class="text-sm text-gray-600">Add a new loyalty card</div>',se,T,W,ie,ce,we,Se='<div class="font-semibold text-gray-900 group-hover:text-blue-700 transition-colors">View Analytics</div> <div class="text-sm text-gray-600">Detailed insights</div>',he,G,de,ue,re,U,ge='<div class="font-semibold text-gray-900 group-hover:text-blue-700 transition-colors">Settings</div> <div class="text-sm text-gray-600">Manage preferences</div>',Ee;t=new Ut({}),f=new rt({props:{title:"Total Active Cards",value:(n[6]||0).toLocaleString(),trend:"up",trendValue:"+12% this month"}}),h=new rt({props:{title:"Total Redemptions",value:(n[5]||0).toLocaleString(),trend:"up",trendValue:"+8% this month"}}),$=new rt({props:{title:"Active Businesses",value:n[4],trend:"up",trendValue:"+2 this month"}}),b=new rt({props:{title:"Avg Engagement",value:n[3]?`${n[3]}%`:"0%",trend:"up",trendValue:"+3% this month"}});const ve=[ga,ha,ma,fa],fe=[];function Pe(m,D){return m[1]?0:m[2]?1:m[0]&&m[0].length===0?2:3}return w=Pe(n),y=fe[w]=ve[w](n),ne=new Zt({props:{class:"w-6 h-6 text-white"}}),ie=new Xt({props:{class:"w-6 h-6 text-white"}}),ue=new oa({props:{class:"w-6 h-6 text-white"}}),{c(){e=d("meta"),s=_(),Z(t.$$.fragment),l=_(),a=d("main"),o=d("div"),Z(f.$$.fragment),v=_(),Z(h.$$.fragment),B=_(),Z($.$$.fragment),V=_(),Z(b.$$.fragment),M=_(),E=d("div"),C=d("div"),C.innerHTML=R,q=_(),y.c(),z=_(),J=d("div"),te=d("h3"),te.textContent=He,ae=_(),N=d("div"),ee=d("a"),K=d("div"),Z(ne.$$.fragment),Ce=_(),me=d("div"),me.innerHTML=oe,se=_(),T=d("a"),W=d("div"),Z(ie.$$.fragment),ce=_(),we=d("div"),we.innerHTML=Se,he=_(),G=d("a"),de=d("div"),Z(ue.$$.fragment),re=_(),U=d("div"),U.innerHTML=ge,this.h()},l(m){const D=Rt("svelte-1t9dauv",document.head);e=c(D,"META",{name:!0,content:!0}),D.forEach(u),s=p(m),Y(t.$$.fragment,m),l=p(m),a=c(m,"MAIN",{class:!0});var X=g(a);o=c(X,"DIV",{class:!0});var F=g(o);Y(f.$$.fragment,F),v=p(F),Y(h.$$.fragment,F),B=p(F),Y($.$$.fragment,F),V=p(F),Y(b.$$.fragment,F),F.forEach(u),M=p(X),E=c(X,"DIV",{class:!0});var S=g(E);C=c(S,"DIV",{class:!0,"data-svelte-h":!0}),H(C)!=="svelte-p11gn4"&&(C.innerHTML=R),q=p(S),y.l(S),S.forEach(u),z=p(X),J=c(X,"DIV",{class:!0});var P=g(J);te=c(P,"H3",{class:!0,"data-svelte-h":!0}),H(te)!=="svelte-xy0o45"&&(te.textContent=He),ae=p(P),N=c(P,"DIV",{class:!0});var L=g(N);ee=c(L,"A",{href:!0,class:!0});var ke=g(ee);K=c(ke,"DIV",{class:!0});var je=g(K);Y(ne.$$.fragment,je),je.forEach(u),Ce=p(ke),me=c(ke,"DIV",{"data-svelte-h":!0}),H(me)!=="svelte-1pfcu60"&&(me.innerHTML=oe),ke.forEach(u),se=p(L),T=c(L,"A",{href:!0,class:!0});var le=g(T);W=c(le,"DIV",{class:!0});var Me=g(W);Y(ie.$$.fragment,Me),Me.forEach(u),ce=p(le),we=c(le,"DIV",{"data-svelte-h":!0}),H(we)!=="svelte-19wbp9g"&&(we.innerHTML=Se),le.forEach(u),he=p(L),G=c(L,"A",{href:!0,class:!0});var Ve=g(G);de=c(Ve,"DIV",{class:!0});var Be=g(de);Y(ue.$$.fragment,Be),Be.forEach(u),re=p(Ve),U=c(Ve,"DIV",{"data-svelte-h":!0}),H(U)!=="svelte-3u6xq0"&&(U.innerHTML=ge),Ve.forEach(u),L.forEach(u),P.forEach(u),X.forEach(u),this.h()},h(){document.title="Tap2 Loyalty Dashboard",i(e,"name","description"),i(e,"content","Manage your digital loyalty card programs"),i(o,"class","grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8 mt-8 pb-8"),i(C,"class","flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6 space-y-3 sm:space-y-0"),i(E,"class","mb-8"),i(te,"class","text-2xl font-bold text-gray-900 mb-6"),i(K,"class","w-12 h-12 bg-gradient-to-br from-tap2-blue to-blue-600 rounded-xl flex items-center justify-center mr-4 group-hover:scale-110 transition-transform duration-200"),i(ee,"href","/create"),i(ee,"class","flex items-center p-6 bg-white rounded-xl hover:shadow-lg transition-all duration-300 border border-gray-200 hover:border-tap2-blue/30 group"),i(W,"class","w-12 h-12 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center mr-4 group-hover:scale-110 transition-transform duration-200"),i(T,"href","/analytics"),i(T,"class","flex items-center p-6 bg-white rounded-xl hover:shadow-lg transition-all duration-300 border border-gray-200 hover:border-blue-400/30 group"),i(de,"class","w-12 h-12 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center mr-4 group-hover:scale-110 transition-transform duration-200"),i(G,"href","/settings"),i(G,"class","flex items-center p-6 bg-white rounded-xl hover:shadow-lg transition-all duration-300 border border-gray-200 hover:border-green-400/30 group"),i(N,"class","grid grid-cols-1 md:grid-cols-3 gap-6"),i(J,"class","bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl p-8 animate-fade-in-up"),i(a,"class","max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8")},m(m,D){r(document.head,e),xe(m,s,D),Q(t,m,D),xe(m,l,D),xe(m,a,D),r(a,o),Q(f,o,null),r(o,v),Q(h,o,null),r(o,B),Q($,o,null),r(o,V),Q(b,o,null),r(a,M),r(a,E),r(E,C),r(E,q),fe[w].m(E,null),r(a,z),r(a,J),r(J,te),r(J,ae),r(J,N),r(N,ee),r(ee,K),Q(ne,K,null),r(ee,Ce),r(ee,me),r(N,se),r(N,T),r(T,W),Q(ie,W,null),r(T,ce),r(T,we),r(N,he),r(N,G),r(G,de),Q(ue,de,null),r(G,re),r(G,U),Ee=!0},p(m,[D]){const X={};D&64&&(X.value=(m[6]||0).toLocaleString()),f.$set(X);const F={};D&32&&(F.value=(m[5]||0).toLocaleString()),h.$set(F);const S={};D&16&&(S.value=m[4]),$.$set(S);const P={};D&8&&(P.value=m[3]?`${m[3]}%`:"0%"),b.$set(P);let L=w;w=Pe(m),w===L?fe[w].p(m,D):(St(),I(fe[L],1,1,()=>{fe[L]=null}),Ht(),y=fe[w],y?y.p(m,D):(y=fe[w]=ve[w](m),y.c()),k(y,1),y.m(E,null))},i(m){Ee||(k(t.$$.fragment,m),k(f.$$.fragment,m),k(h.$$.fragment,m),k($.$$.fragment,m),k(b.$$.fragment,m),k(y),k(ne.$$.fragment,m),k(ie.$$.fragment,m),k(ue.$$.fragment,m),Ee=!0)},o(m){I(t.$$.fragment,m),I(f.$$.fragment,m),I(h.$$.fragment,m),I($.$$.fragment,m),I(b.$$.fragment,m),I(y),I(ne.$$.fragment,m),I(ie.$$.fragment,m),I(ue.$$.fragment,m),Ee=!1},d(m){m&&(u(s),u(l),u(a)),u(e),O(t,m),O(f),O(h),O($),O(b),fe[w].d(),O(ne),O(ie),O(ue)}}}function _a(n,e,s){let t,l,a,o,h=[],B=!0,$=!1;qt(async()=>{try{const b=await Kt.query(Wt.loyaltyCards.list);s(0,h=b||[]),s(1,B=!1),(!b||b.length===0)&&s(2,$=!1)}catch(b){console.error("Error loading loyalty cards:",b),s(0,h=[]),s(2,$=!0),s(1,B=!1)}});const V=()=>window.location.reload();return n.$$.update=()=>{n.$$.dirty&1&&s(6,t=h?h.reduce((b,M)=>b+(M.activeCards||0),0):0),n.$$.dirty&1&&s(5,l=h?h.reduce((b,M)=>b+(M.redemptions||0),0):0),n.$$.dirty&1&&s(4,a=h?h.length:0),n.$$.dirty&1&&s(3,o=h&&h.length>0?Math.round(h.reduce((b,M)=>b+(M.redemptions||0)/(M.activeCards||1),0)/h.length*100):0)},[h,B,$,o,a,l,t,void 0,void 0,V]}class Da extends nt{constructor(e){super(),ot(this,e,_a,pa,it,{params:7,data:8})}get params(){return this.$$.ctx[7]}get data(){return this.$$.ctx[8]}}export{Da as component};
